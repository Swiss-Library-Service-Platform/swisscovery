{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/main.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-courier-info/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-courier-info/js/slsp-courier-info.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-edit-personal-details/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-edit-personal-details/js/slsp-edit-personal-details.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-i-button/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-i-button/js/slsp-i-button.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-alert/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-alert/js/slsp-ill-signin-order-alert.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-logged-out/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-logged-out/js/slsp-ill-signin-order-logged-out.module.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","angular","controller","$element","this","form","parentElement","$doCheck","info","formLength","undefined","children","document","createElement","className","innerHTML","parentCtrl","$translate","instant","insertBefore","component","bindings","$scope","lang","sms","$root","$$childHead","$ctrl","userSessionManagerService","getInterfaceLanguage","detailsBaseEdu","detailsBaseReg","exclude","grpA","grpB","getPatronGrp","personalInfoService","personalInfo","patron","patronstatus","registration","institution","patronstatuscode","includes","grpLabelA","labelA","grpLabelB","labelB","template","vm","getLibrary","currLoc","location","librarycodeTranslation","biblinkText","biblinkBase","getAlert","ga","almaHowToGetitService","reqAlert","_htmlMsg","myEl2","element","querySelector","addClass","removeClass","service","jwtHelper","isGuest","jwt","sessionStorage","getItem","decodedToken","decodeToken","userGroup","userName","userService","usrNme"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\r\nimport './slsp-i-button';\r\nimport './slsp-courier-info';\r\nimport './slsp-ill-signin-order-logged-out';\r\nimport './slsp-ill-signin-order-alert';\r\nimport './slsp-edit-personal-details';\r\n\r\n\r\n\r\nvar app = angular.module('viewCustom', ['angularLoad', 'slspIButton', 'slspCourierInfo', 'slspIllSigninOrderLoggedOut', 'slspIllSigninOrderAlert', 'slspEditPersonalDetails' ]);\r\n\r\n","require('./js/slsp-courier-info.module.js')\r\nmodule.exports = 'slspCourierInfo'","angular\r\n    .module('slspCourierInfo', [])\r\n\r\n    //--------Fees messages ---------------------------------------\r\n\r\n    .controller('CourierInfoController', ['$element', function ($element) {\r\n\r\n        //shortcut for convenience\r\n\r\n        this.form = $element[0].parentElement;\r\n\r\n        //function for inserting block\r\n\r\n        this.$doCheck = function () {\r\n            let form = false;\n            let formLength = 2;\n            if (this.form.children[0].children[1] !== undefined && this.form.children[0].children[1].children[0] !== undefined) {\r\n                form = this.form.children[0].children[1].children[0];\r\n            }\n            else if (this.form.children[0].children[0] !== undefined && this.form.children[0].children[0].children[0] !== undefined) {\r\n                form = this.form.children[0].children[0].children[0];\n                formLength = 3;\r\n            }\n\n            //create and insert info block if not present\n\n            if (form && form.children.length == formLength) {\r\n                let info = document.createElement('DIV');\n                info.className = \"courier-info bar alert-bar\";\n                info.innerHTML =\n                `<h4>${this.parentCtrl.$translate.instant('customize.fullview.feesTitle')}</h4>\n\t\t<p>${this.parentCtrl.$translate.instant('customize.fullview.feesInfo')}</p>\n\t\t<p><a href=\"${this.parentCtrl.$translate.instant('customize.fullview.feesUrl')}\"\n\t\ttarget=\"_blank\">${this.parentCtrl.$translate.instant('customize.fullview.feesLinkText')}</a></p>`;\n                form.insertBefore(info, form.children[formLength - 1]);\r\n            }\r\n        }\n\r\n    }])\r\n\r\n    .component('prmRequestAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        controller: 'CourierInfoController'\r\n    });\r\n","require('./js/slsp-edit-personal-details.module.js')\r\nmodule.exports = 'slspEditPersonalDetails'","\r\n\r\nangular\r\n    .module('slspEditPersonalDetails', [])\r\n\r\n\r\n\r\n    //------------------------------ edit personal details  ---------------------------\r\n\r\n    .controller('EditPersonalDetailsController', ['$scope', function ($scope) {\r\n\r\n        let lang = 'en';\r\n        let sms = $scope.$root.$$childHead.$ctrl.userSessionManagerService;\r\n        if (sms) {\r\n            lang = sms.getInterfaceLanguage();\r\n        }\r\n\r\n        this.detailsBaseEdu = \"https:\\/\\/eduid.ch\\/web\\/change-account-data\\/2\\/?lang=\" + lang;\r\n        this.detailsBaseReg = \"https:\\/\\/registration.slsp.ch\\/library-card\\/?lang=\" + lang;\r\n        this.exclude = ['STAFF', '11', '12', '13', '14', '15', '16', '91', '92', '99'];\r\n        this.grpA = ['11', '91', '92'];\r\n        this.grpB = ['12', '13', '14', '15', '16'];\r\n\r\n\r\n        this.getPatronGrp = function() {\r\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                let patron = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                if (!this.exclude.includes(patron)) {\r\n                    return true;\r\n                }\r\n                else {\r\n                    return false;\r\n            }\r\n        }\r\n            return false;\r\n        }\r\n\r\n        this.grpLabelA = function() {\r\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                let labelA = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                if (this.grpA.includes(labelA)) {\r\n                    return true;\r\n                }\r\n                else {\r\n                    return false;\r\n            }\r\n        }\r\n            return false;\r\n        }\r\n\r\n    \r\n        this.grpLabelB = function() {\r\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                let labelB = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                if (this.grpB.includes(labelB)) {\r\n                    return true;\r\n                }\r\n                else {\r\n                    return false;\r\n            }\r\n        }\r\n            return false;\r\n        }\r\n\r\n \r\n    }])\r\n\r\n\r\n    .component('prmPersonalInfoAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        controller: 'EditPersonalDetailsController',\r\n        template: '<md-card ng-if=\"$ctrl.grpLabelA()\" translate=\"customized.libraries.details\" flex=\"100\" class=\"bar alert-bar courier-info\"></md-card><md-card ng-if=\"$ctrl.grpLabelB()\" translate=\"customized.slsp.details\" flex=\"100\" class=\"bar alert-bar courier-info\"></md-card>       <div layout=\"column\"> <md-button ng-if=\"$ctrl.getPatronGrp()\" href=\"{{ $ctrl.detailsBaseEdu }}\" target=\"_blank\" layout=\"row\" class=\"courier-info bar alert-bar layout-align-left-center layout-row\" layout-align=\"left center\"><span class=\"md-subhead\"><prm-icon  class=\"rotate-20 margin-right-small\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"pencil\"></prm-icon><span  class=\"md-subhead\" translate=\"customized.personal.details\"></span></md-button>   <br />   <md-button ng-if=\"$ctrl.getPatronGrp()\" href=\"{{ $ctrl.detailsBaseReg }}\" target=\"_blank\" layout=\"row\" class=\"courier-info bar alert-bar layout-align-left-center layout-row\" layout-align=\"left center\"><prm-icon class=\"rotate-20 margin-right-small\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"account-card-details\"></prm-icon><span  class=\"md-subhead\" translate=\"customized.libcard.number\"></span></md-button ></div> '\r\n\r\n    });\r\n","require('./js/slsp-i-button.module.js')\r\nmodule.exports = 'slspIButton'","\r\n\r\n//--------\"i\" button ---------------------------------------\r\n\r\nangular\r\n    .module('slspIButton', [])\r\n\r\n    .controller('LibInfoController', [function () {\r\n        var vm = this;\r\n        vm.getLibrary = getLibrary;\r\n        vm.biblinkText = \"Library\";\r\n        vm.biblinkBase = \"https:\\/\\/slsp.ch\\/libraries\";\r\n\r\n        function getLibrary() {\r\n            return vm.parentCtrl.currLoc.location.librarycodeTranslation;\r\n        }\r\n\r\n    }])\r\n\r\n    .component('prmLocationItemsAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        controller: 'LibInfoController',\r\n        template: '<div layout=\"row\" class=\"LibInfo\" layout-align=\"start center\"><span class=\"md-subhead\"><a ng-href=\"{{ $ctrl.biblinkBase }}\" target=\"_blank\"><img width=\"35px\" ng-src=\"/discovery/custom/41SLSP_NETWORK-CENTRAL_PACKAGE/img/information.png\" />{{ $ctrl.getLibrary() }}</a></span></div>'\r\n    });\r\n\r\n\r\n\r\n","require('./js/slsp-ill-signin-order-alert.module.js')\r\nmodule.exports = 'slspIllSigninOrderAlert'","//--------ILL Signin Order -  if Alert Message ---------------------------------------\r\n\r\nangular\r\n    .module('slspIllSigninOrderAlert', [])\r\n\r\n    .controller('AlertMsgController', ['$scope', function ($scope) {\r\n        var vm = this;\r\n        vm.getAlert = getAlert\r\n\r\n        function getAlert() {\r\n            var ga = vm.parentCtrl.almaHowToGetitService.reqAlert._htmlMsg;\r\n            var myEl2 = angular.element(document.querySelector('primo-explore'));\r\n\r\n            if (ga.length > 0) {\r\n                return myEl2.addClass('alert');\r\n\r\n            }\r\n            else {\r\n\r\n                return myEl2.removeClass('alert');\r\n\r\n            }\r\n        }\r\n\r\n    }])\r\n\r\n    .component('almaHowovpAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        controller: 'AlertMsgController',\r\n        template: '<div style=\"display:none\">{{$ctrl.getAlert()}}</div>'\r\n    });\r\n","require('./js/slsp-ill-signin-order-logged-out.module.js')\r\nmodule.exports = 'slspIllSigninOrderLoggedOut'","\r\n\r\n    //--------ILL Signin Order -  if logged out ---------------------------------------\r\n   \r\n\r\nangular\r\n    .module('slspIllSigninOrderLoggedOut', [])\r\n\r\n    .service('userService', ['jwtHelper', function (jwtHelper) {\r\n        this.isGuest = function () {\r\n            var jwt = sessionStorage.getItem('primoExploreJwt');\r\n            if (!jwt) {\r\n                return true;\r\n            }\r\n            var decodedToken = jwtHelper.decodeToken(jwt);\r\n            let userName = decodedToken.userGroup !== 'GUEST' ? decodedToken.userName : '';\r\n            if (userName) {\r\n                return false\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        }\r\n    }])\r\n\r\n\r\n    .controller('IllBoxController', ['$scope', 'userService', function ($scope, userService) {\r\n\r\n    $scope.usrNme = userService.isGuest();\r\n\r\n    if ($scope.usrNme == true) {\r\n        var myEl = angular.element(document.querySelector('primo-explore'));\r\n        return myEl.addClass('logged-out')\r\n    }\r\n\r\n    else {\r\n        var myEl = angular.element(document.querySelector('primo-explore'));\r\n        return myEl.removeClass('logged-out');\r\n    }\r\n\r\n\r\n}])\r\n\r\n.component('prmUserAreaExpandableAfter', {\r\n    bindings: { parentCtrl: '<' },\r\n    controller: 'IllBoxController',\r\n    template: ''\r\n});\r\n\r\n"]}
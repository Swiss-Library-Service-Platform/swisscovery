{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/main.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-courier-info/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-courier-info/js/slsp-courier-info.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-edit-personal-details/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-edit-personal-details/js/slsp-edit-personal-details.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-i-button/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-i-button/js/slsp-i-button.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-alert/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-alert/js/slsp-ill-signin-order-alert.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-logged-out/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-logged-out/js/slsp-ill-signin-order-logged-out.module.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","angular","controller","$element","this","form","parentElement","$doCheck","info","undefined","children","document","createElement","className","innerHTML","parentCtrl","$translate","instant","insertBefore","component","bindings","detailsBaseEdu","detailsBaseReg","exclude","grpA","grpB","getPatronGrp","personalInfoService","personalInfo","patron","patronstatus","registration","institution","patronstatuscode","includes","grpLabelA","labelA","grpLabelB","labelB","template","vm","getLibrary","currLoc","location","librarycodeTranslation","biblinkText","biblinkBase","$scope","getAlert","ga","almaHowToGetitService","reqAlert","_htmlMsg","myEl2","element","querySelector","addClass","removeClass","service","jwtHelper","isGuest","jwt","sessionStorage","getItem","decodedToken","decodeToken","userGroup","userName","userService","usrNme"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\r\nimport './slsp-i-button';\r\nimport './slsp-courier-info';\r\nimport './slsp-ill-signin-order-logged-out';\r\nimport './slsp-ill-signin-order-alert';\r\nimport './slsp-edit-personal-details';\r\n\r\n\r\n\r\nvar app = angular.module('viewCustom', ['angularLoad', 'slspIButton', 'slspCourierInfo', 'slspIllSigninOrderLoggedOut', 'slspIllSigninOrderAlert', 'slspEditPersonalDetails' ]);\r\n\r\n","require('./js/slsp-courier-info.module.js')\r\nmodule.exports = 'slspCourierInfo'","angular\r\n    .module('slspCourierInfo', [])\r\n\r\n    //--------Fees messages ---------------------------------------\r\n\r\n    .controller('CourierInfoController', ['$element', function ($element) {\r\n\r\n        //shortcut for convenience\r\n\r\n        this.form = $element[0].parentElement;\r\n\r\n        //function for inserting block\r\n\r\n        this.$doCheck = function () {\r\n            let form = false;\r\n            if (this.form.children[1].children[1] !== undefined &&\r\n        this.form.children[1].children[1].children[0] !== undefined) {\r\n                form = this.form.children[1].children[1].children[0];\r\n            }\r\n            else if (this.form.children[1].children[0] !== undefined &&\r\n            this.form.children[1].children[0].children[0] !== undefined) {\r\n                form = this.form.children[1].children[0].children[0];\r\n            }\r\n\r\n            //create and insert info block if not present\r\n\r\n            if (form && form.children.length == 2) {\r\n                let info = document.createElement('DIV');\r\n                info.className = \"courier-info bar alert-bar\";\r\n                info.innerHTML =\r\n                `<h4>${this.parentCtrl.$translate.instant('customize.fullview.feesTitle')}</h4>\r\n\t\t<p>${this.parentCtrl.$translate.instant('customize.fullview.feesInfo')}</p>\r\n\t\t<p><a href=\"${this.parentCtrl.$translate.instant('customize.fullview.feesUrl')}\"\r\n\t\ttarget=\"_blank\">${this.parentCtrl.$translate.instant('customize.fullview.feesLinkText')}</a></p>`;\r\n                form.insertBefore(info, form.children[1]);\r\n            }\r\n        }\r\n    }])\r\n\r\n    .component('prmRequestAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        controller: 'CourierInfoController'\r\n    });\r\n\r\n  ","require('./js/slsp-edit-personal-details.module.js')\r\nmodule.exports = 'slspEditPersonalDetails'","\r\n\r\nangular\r\n    .module('slspEditPersonalDetails', [])\r\n\r\n\r\n\r\n    //------------------------------ edit personal details  ---------------------------\r\n\r\n    .controller('EditPersonalDetailsController', [function () {\r\n\r\n        this.detailsBaseEdu = \"https:\\/\\/eduid.ch\";\r\n        this.detailsBaseReg = \"https:\\/\\/registration.slsp.ch\\/library-card\\/\";\r\n        this.exclude = ['STAFF', '11', '12', '13', '14', '15', '16', '91', '92', '99'];\r\n        this.grpA = ['11', '91', '92'];\r\n        this.grpB = ['12', '13', '14', '15', '16'];\r\n\r\n\r\n        this.getPatronGrp = function() {\r\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                let patron = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                if (!this.exclude.includes(patron)) {\r\n                    return true;\r\n                }\r\n                else {\r\n                    return false;\r\n            }\r\n        }\r\n            return false;\r\n        }\r\n\r\n        this.grpLabelA = function() {\r\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                let labelA = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                if (this.grpA.includes(labelA)) {\r\n                    return true;\r\n                }\r\n                else {\r\n                    return false;\r\n            }\r\n        }\r\n            return false;\r\n        }\r\n\r\n    \r\n        this.grpLabelB = function() {\r\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                let labelB = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                if (this.grpB.includes(labelB)) {\r\n                    return true;\r\n                }\r\n                else {\r\n                    return false;\r\n            }\r\n        }\r\n            return false;\r\n        }\r\n\r\n \r\n    }])\r\n\r\n\r\n    .component('prmPersonalInfoAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        controller: 'EditPersonalDetailsController',\r\n        template: '<md-card ng-if=\"$ctrl.grpLabelA()\" translate=\"customized.libraries.details\" flex=\"100\" class=\"bar alert-bar courier-info\"></md-card><md-card ng-if=\"$ctrl.grpLabelB()\" translate=\"customized.slsp.details\" flex=\"100\" class=\"bar alert-bar courier-info\"></md-card>       <div layout=\"column\"> <md-button ng-if=\"$ctrl.getPatronGrp()\" href=\"{{ $ctrl.detailsBaseEdu }}\" target=\"_blank\" layout=\"row\" class=\"courier-info bar alert-bar layout-align-left-center layout-row\" layout-align=\"left center\"><span class=\"md-subhead\"><prm-icon  class=\"rotate-20 margin-right-small\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"pencil\"></prm-icon><span  class=\"md-subhead\" translate=\"customized.personal.details\"></span></md-button>   <br />   <md-button ng-if=\"$ctrl.getPatronGrp()\" href=\"{{ $ctrl.detailsBaseReg }}\" target=\"_blank\" layout=\"row\" class=\"courier-info bar alert-bar layout-align-left-center layout-row\" layout-align=\"left center\"><prm-icon class=\"rotate-20 margin-right-small\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"account-card-details\"></prm-icon><span  class=\"md-subhead\" translate=\"customized.libcard.number\"></span></md-button ></div> '\r\n\r\n    });\r\n","require('./js/slsp-i-button.module.js')\r\nmodule.exports = 'slspIButton'","\r\n\r\n//--------\"i\" button ---------------------------------------\r\n\r\nangular\r\n    .module('slspIButton', [])\r\n\r\n    .controller('LibInfoController', [function () {\r\n        var vm = this;\r\n        vm.getLibrary = getLibrary;\r\n        vm.biblinkText = \"Library\";\r\n        vm.biblinkBase = \"https:\\/\\/slsp.ch\\/libraries\";\r\n\r\n        function getLibrary() {\r\n            return vm.parentCtrl.currLoc.location.librarycodeTranslation;\r\n        }\r\n\r\n    }])\r\n\r\n    .component('prmLocationItemsAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        controller: 'LibInfoController',\r\n        template: '<div layout=\"row\" class=\"LibInfo\" layout-align=\"start center\"><span class=\"md-subhead\"><a ng-href=\"{{ $ctrl.biblinkBase }}\" target=\"_blank\"><img width=\"35px\" ng-src=\"/discovery/custom/41SLSP_NETWORK-CENTRAL_PACKAGE/img/information.png\" />{{ $ctrl.getLibrary() }}</a></span></div>'\r\n    });\r\n\r\n\r\n\r\n","require('./js/slsp-ill-signin-order-alert.module.js')\r\nmodule.exports = 'slspIllSigninOrderAlert'","//--------ILL Signin Order -  if Alert Message ---------------------------------------\r\n\r\nangular\r\n    .module('slspIllSigninOrderAlert', [])\r\n\r\n    .controller('AlertMsgController', ['$scope', function ($scope) {\r\n        var vm = this;\r\n        vm.getAlert = getAlert\r\n\r\n        function getAlert() {\r\n            var ga = vm.parentCtrl.almaHowToGetitService.reqAlert._htmlMsg;\r\n            var myEl2 = angular.element(document.querySelector('primo-explore'));\r\n\r\n            if (ga.length > 0) {\r\n                return myEl2.addClass('alert');\r\n\r\n            }\r\n            else {\r\n\r\n                return myEl2.removeClass('alert');\r\n\r\n            }\r\n        }\r\n\r\n    }])\r\n\r\n    .component('almaHowovpAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        controller: 'AlertMsgController',\r\n        template: '<div style=\"display:none\">{{$ctrl.getAlert()}}</div>'\r\n    });\r\n","require('./js/slsp-ill-signin-order-logged-out.module.js')\r\nmodule.exports = 'slspIllSigninOrderLoggedOut'","\r\n\r\n    //--------ILL Signin Order -  if logged out ---------------------------------------\r\n   \r\n\r\nangular\r\n    .module('slspIllSigninOrderLoggedOut', [])\r\n\r\n    .service('userService', ['jwtHelper', function (jwtHelper) {\r\n        this.isGuest = function () {\r\n            var jwt = sessionStorage.getItem('primoExploreJwt');\r\n            if (!jwt) {\r\n                return true;\r\n            }\r\n            var decodedToken = jwtHelper.decodeToken(jwt);\r\n            let userName = decodedToken.userGroup !== 'GUEST' ? decodedToken.userName : '';\r\n            if (userName) {\r\n                return false\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        }\r\n    }])\r\n\r\n\r\n    .controller('IllBoxController', ['$scope', 'userService', function ($scope, userService) {\r\n\r\n    $scope.usrNme = userService.isGuest();\r\n\r\n    if ($scope.usrNme == true) {\r\n        var myEl = angular.element(document.querySelector('primo-explore'));\r\n        return myEl.addClass('logged-out')\r\n    }\r\n\r\n    else {\r\n        var myEl = angular.element(document.querySelector('primo-explore'));\r\n        return myEl.removeClass('logged-out');\r\n    }\r\n\r\n\r\n}])\r\n\r\n.component('prmUserAreaExpandableAfter', {\r\n    bindings: { parentCtrl: '<' },\r\n    controller: 'IllBoxController',\r\n    template: ''\r\n});\r\n\r\n"]}
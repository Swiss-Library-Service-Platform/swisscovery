{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/main.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-location-items-after/eth-location-items-after.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-location-items-after/eth-location-items-filter/eth-location-items-filter.controller.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-location-items-after/eth-location-items-filter/eth-location-items-filter.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-location-items-after/slsp-i-button/slsp-i-button.controller.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-location-items-after/slsp-i-button/slsp-i-button.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-locations-after/eth-locations-after.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-locations-after/eth-locations-filter/eth-locations-filter.controller.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-locations-after/eth-locations-filter/eth-locations-filter.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-user-area-expandable-after/bcu-lang-switch/bcu-lang-switch.controller.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-user-area-expandable-after/bcu-lang-switch/bcu-lang-switch.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.controller.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.service.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/prm-user-area-expandable-after/slsp-user-area-expandable-after.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-archives-htgi/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-archives-htgi/js/slsp-archives-htgi.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-archives-viewit/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-archives-viewit/js/slsp-archives-viewit.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-courier-info/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-courier-info/js/slsp-courier-info.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-edit-personal-details/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-edit-personal-details/js/slsp-edit-personal-details.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-http-intercept-requests/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-http-intercept-requests/js/slsp-http-intercept-requests.module.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-alert/index.js","primo-explore/custom/41SLSP_NETWORK-VU1_UNION/js/slsp-ill-signin-order-alert/js/slsp-ill-signin-order-alert.module.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","angular","_ethLocationItemsFilter","_slspIButton","ethLocationItemsAfterModule","component","bindings","parentCtrl","template","requires","push","ethLocationItemsFilterModule","name","slspIButtonModule","ethLocationItemsFilterController","$timeout","$scope","_classCallCheck","this","_this","afterCtrl","$watch","newValue","oldValue","scope","$ctrl","isLocationsFilterVisible","currentItemsArray","isArray","console","error","message","$inject","controller","slspIButtonController","getLibrary","currLoc","location","librarycodeTranslation","biblinkText","biblinkBase","_ethLocationsFilter","ethLocationsAfterModule","ethLocationsFilterModule","ethLocationsFilterController","bcuLangSwitchController","$element","$window","$parent","parent","languages","includes","lang","changeLanguage","changeLangService","addLangParamToUrl","i18nService","setLanguage","then","$state","go","current","reload","_bcuLangSwitch","bcuLangSwitchModule","slspIllSigninOrderLoggedOutController","slspIllSigninOrderLoggedOutService","usrNme","isGuest","element","document","querySelector","removeClass","addClass","_slspIllSigninOrderLoggedOut","_slspIllSigninOrderLoggedOut2","slspIllSigninOrderLoggedOutModule","factory","jwtHelper","getDecodedToken","sessionStorage","jwt","getItem","decodeToken","decodedToken","userGroup","userName","slspUserAreaExpandableAfterModule","$onInit","item","pnx","display","source","sourceid","guid","getElementById","classList","add","control","originalsourceid","substring","lastIndexOf","url","$translate","delivery","GetIt1","links","filter","l","isLinktoOnline","link","translation","fullView","text","availabilityLine","changeButton","result","changeButtonText","$doCheck","button","html","form","parentElement","info","formLength","undefined","children","createElement","className","innerHTML","instant","insertBefore","sms","$root","$$childHead","userSessionManagerService","getInterfaceLanguage","detailsBaseEdu","detailsBaseReg","exclude","grpA","grpB","getPatronGrp","personalInfoService","personalInfo","patron","patronstatus","registration","institution","patronstatuscode","grpLabelA","labelA","grpLabelB","labelB","config","$httpProvider","interceptors","$q","request","_request","requestError","reject","responseError","response","_response","test","interfaceLanguage","injector","get","getUserLanguage","window","appConfig","list_of_hold_states","en","de","fr","it","Object","keys","list_of_hold_states_regexp","RegExp","map","m","toLowerCase","join","status","data","holds","hold","holdstatus","cancel","log","vm","getAlert","ga","almaHowToGetitService","reqAlert","_htmlMsg","myEl2"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\n//import './slsp-i-button';\nimport './slsp-courier-info';\n//import './slsp-ill-signin-order-logged-out';\nimport './slsp-ill-signin-order-alert';\nimport './slsp-edit-personal-details';\nimport './prm-locations-after';\nimport './prm-location-items-after';\nimport './slsp-archives-htgi';\nimport './slsp-archives-viewit';\nimport './slsp-http-intercept-requests';\nimport './prm-user-area-expandable-after';\n\n\nvar app = angular.module('viewCustom', ['angularLoad', 'slspCourierInfo', 'slspIllSigninOrderAlert', 'slspEditPersonalDetails','ethLocationsAfterModule', 'ethLocationItemsAfterModule', 'slspArchivesHtgi', 'slspArchivesViewit','slspHttpInterceptRequests', 'slspUserAreaExpandableAfterModule' ]);\n\n","import {ethLocationItemsFilterModule} from './eth-location-items-filter/eth-location-items-filter.module';\nimport {slspIButtonModule} from './slsp-i-button/slsp-i-button.module';\n\nexport const ethLocationItemsAfterModule = angular\n    .module('ethLocationItemsAfterModule', [])\n        .component('prmLocationItemsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<eth-location-items-filter-component after-ctrl=\"$ctrl\"></eth-location-items-filter-component><slsp-i-button-component after-ctrl=\"$ctrl\"></slsp-i-button-component>`\n        });\n\nethLocationItemsAfterModule.requires.push(ethLocationItemsFilterModule.name);\nethLocationItemsAfterModule.requires.push(slspIButtonModule.name);\n","export class ethLocationItemsFilterController {\n\n    constructor($timeout, $scope) {\n        this.$timeout = $timeout;\n        this.$scope = $scope;\n    }\n\n    $onInit() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.$watch('this.$ctrl.parentCtrl.loc.location.librarycodeTranslation', (newValue, oldValue, scope) => {\n               \n                if(!scope.$ctrl.parentCtrl.isLocationsFilterVisible && newValue && newValue != ''){\n                    \n                    this.$scope.$watch('this.$ctrl.parentCtrl.loc.items', (currentItemsArray) => {\n\n                        if (angular.isArray(currentItemsArray) && currentItemsArray.length > 1){\n                    \n                                this.$timeout(() => {\n                                    scope.$ctrl.parentCtrl.isLocationsFilterVisible = true;\n                                }, 0);\n                    \n                           }      \n                    \n                })\n            }\n\n            }, true);\n           \n            \n    \n                   \n          \n         \n        }\n        catch(e){\n            console.error(\"***SLSP*** an error occured: ethLocationItemsFilterController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nethLocationItemsFilterController.$inject = ['$timeout', '$scope'];\n\n","/**\n* @ngdoc module\n* @name ethLocationsFilterModule\n*\n* @description\n*\n* Customization for the locations filter:<br>\n* - the locations filter is visible by default\n*\n* If there is 1 location: prmLocationItemsAfter\n*\n* If there are multiple locations: prmLocationAfter;\n* after all locations: prmLocationsAfter;\n* after choosing a location: prmLocationItemsAfter\n*\n*\n* <b>AngularJS Dependencies</b><br>\n*\n*\n* <b>CSS/Image Dependencies</b><br>\n* CSS eth-locations-filter.css\n*\n*\n*/\nimport {ethLocationItemsFilterController} from './eth-location-items-filter.controller';\n\nexport const ethLocationItemsFilterModule = angular\n    .module('ethLocationItemsFilterModule', [])\n        .controller('ethLocationItemsFilterController', ethLocationItemsFilterController)\n        .component('ethLocationItemsFilterComponent', {\n            bindings: {afterCtrl: '<'},\n            controller: 'ethLocationItemsFilterController'\n        })\n","\r\n\r\n//--------\"i\" button ---------------------------------------\r\n\r\n\r\n    export class slspIButtonController {\r\n\r\n        constructor() {}\r\n      \r\n        $onInit() {\r\n            try{\r\n                this.parentCtrl = this.afterCtrl.parentCtrl;\r\n                this.getLibrary = getLibrary;\r\n                this.biblinkText = \"Library\";\r\n                this.biblinkBase = \"https:\\/\\/slsp.ch\\/libraries\";\r\n\r\n                function getLibrary() {\r\n                    return this.parentCtrl.currLoc.location.librarycodeTranslation;\r\n                    \r\n                }\r\n            \r\n            }\r\n            catch(e){\r\n                console.error(\"***SLSP*** an error occured: slspIButtonController\\n\\n\");\r\n                console.error(e.message);\r\n            }\r\n        }\r\n    }\r\n    \r\n    slspIButtonController.$inject = [];","\r\n\r\n//--------\"i\" button ---------------------------------------\r\n\r\n// angular\r\n//     .module('slspIButton', [])\r\n\r\n//     .controller('LibInfoController', [function () {\r\n//         var vm = this;\r\n//         vm.getLibrary = getLibrary;\r\n//         vm.biblinkText = \"Library\";\r\n//         vm.biblinkBase = \"https:\\/\\/slsp.ch\\/libraries\";\r\n\r\n//         function getLibrary() {\r\n//             return vm.parentCtrl.currLoc.location.librarycodeTranslation;\r\n//         }\r\n\r\n//     }])\r\n\r\n//     .component('prmLocationItemsAfter', {\r\n//         bindings: { parentCtrl: '<' },\r\n//         controller: 'LibInfoController',\r\n//         template: '<div layout=\"row\" class=\"LibInfo\" layout-align=\"start center\"><span class=\"md-subhead\"><a ng-href=\"{{ $ctrl.biblinkBase }}\" target=\"_blank\"><img width=\"35px\" ng-src=\"/discovery/custom/41SLSP_NETWORK-CENTRAL_PACKAGE/img/information.png\" />{{ $ctrl.getLibrary() }}</a></span></div>'\r\n//     });\r\n\r\n\r\n\r\n    import {slspIButtonController} from './slsp-i-button.controller';\r\n    import {slspIButtonHtml} from './slsp-i-button.html';\r\n\r\n    export const slspIButtonModule = angular\r\n        .module('slspIButtonModule', [])\r\n            .controller('slspIButtonController', slspIButtonController)\r\n            .component('slspIButtonComponent', {\r\n                bindings: {afterCtrl: '<'},\r\n                controller: 'slspIButtonController',\r\n                template: slspIButtonHtml\r\n            })","import {ethLocationsFilterModule} from './eth-locations-filter/eth-locations-filter.module';\n\nexport const ethLocationsAfterModule = angular\n    .module('ethLocationsAfterModule', [])\n        .component('prmLocationsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<eth-locations-filter-component after-ctrl=\"$ctrl\"></eth-locations-filter-component>`\n        });\n\nethLocationsAfterModule.requires.push(ethLocationsFilterModule.name);\n","export class ethLocationsFilterController {\n\n    constructor($timeout, $scope) {\n        this.$timeout = $timeout;\n        this.$scope = $scope;\n    }\n\n    $onInit() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.$watch('this.$ctrl.parentCtrl.locations[0].location.librarycodeTranslation', (newValue, oldValue, scope) => {\n                if(!scope.$ctrl.parentCtrl.isLocationsFilterVisible && newValue && newValue != ''){\n                    this.$timeout(() => {\n                        scope.$ctrl.parentCtrl.isLocationsFilterVisible = true;\n                    }, 0);\n                }\n            }, true);\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethLocationsFilterController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nethLocationsFilterController.$inject = ['$timeout', '$scope'];\n","/**\n* @ngdoc module\n* @name ethLocationsFilterModule\n*\n* @description\n*\n* Customization for the locations filter:<br>\n* - the locations filter is visible by default\n*\n* If there is 1 location: prmLocationItemsAfter\n*\n* If there are multiple locations: prmLocationAfter;\n* after all locations: prmLocationsAfter;\n* after choosing a location: prmLocationItemsAfter\n*\n*\n* <b>AngularJS Dependencies</b><br>\n*\n*\n* <b>CSS/Image Dependencies</b><br>\n* CSS eth-locations-filter.css\n*\n*\n*/\nimport {ethLocationsFilterController} from './eth-locations-filter.controller';\n\nexport const ethLocationsFilterModule = angular\n    .module('ethLocationsFilterModule', [])\n        .controller('ethLocationsFilterController', ethLocationsFilterController)\n        .component('ethLocationsFilterComponent', {\n            bindings: {afterCtrl: '<'},\n            controller: 'ethLocationsFilterController'\n        })\n","export class bcuLangSwitchController {\n\n    constructor($element, $window) {\n        this.$parent = $element.parent().parent()[0];\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n        this.$window = $window;\n    }\n\n    $onInit() {\n        try {\n            \n            this.languages = [\"de\",\"fr\",\"it\",\"en\"];\n            if (!this.languages.includes(this.parentCtrl.lang)) {\n                this.changeLanguage(\"en\");\n            }\n            \n        }\n        catch (e) {\n            console.error(\"***BCUFR*** bcuLangSwitchControler $onInit\");\n            console.error(e.message);\n        }\n    };\n\n    changeLanguage(lang) {\n        \n        this.parentCtrl.changeLangService.addLangParamToUrl(lang);\n        let t = this.parentCtrl;\n        this.parentCtrl.i18nService.setLanguage(lang).then(function(){\n            t.$timeout(function(){return t.$state.go(t.$state.current,{lang:lang},{reload:!0})})\n        });\n };\n\n}\nbcuLangSwitchController.$inject = ['$element'];","/**\n* @ngdoc module\n* @name bcuLangSwitchModule\n*\n* @description\n* - Add LangSwitch to user area\n* @example\n* each view\n*\n*/\nimport {bcuLangSwitchController} from './bcu-lang-switch.controller';\n\nexport const bcuLangSwitchModule = angular\n    .module('bcuLangSwitchModule', [])\n        .controller('bcuLangSwitchController', bcuLangSwitchController)\n        .component('bcuLangSwitchComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'bcuLangSwitchController',\n//            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"(lang, url) in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\"><a href=\"{{url}}\">{{lang}}</a></button>'\n            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"lang in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\" ng-click=\"$ctrl.changeLanguage(lang)\">{{lang}}</button>'\n        })\n","\nexport class slspIllSigninOrderLoggedOutController {\n\n    constructor(slspIllSigninOrderLoggedOutService, $scope) {\n        this.slspIllSigninOrderLoggedOutService = slspIllSigninOrderLoggedOutService;\n        this.$scope = $scope;\n    }\n\n    $doCheck() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.usrNme = this.slspIllSigninOrderLoggedOutService.isGuest();\n\n            if (this.$scope.usrNme == true) {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.addClass('logged-out')\n            }\n        \n            else {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.removeClass('logged-out');\n            }\n        }\n        catch(e){\n            console.error(\"***SLSP*** an error occured: slspIllSigninOrderLoggedOutController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nslspIllSigninOrderLoggedOutController.$inject = ['slspIllSigninOrderLoggedOutService', '$scope'];\n        \n\n","\n\n    //--------ILL Signin Order -  if logged out ---------------------------------------\n   \n\n    import {slspIllSigninOrderLoggedOutController} from './slsp-ill-signin-order-logged-out.controller';\n    import {slspIllSigninOrderLoggedOutService} from './slsp-ill-signin-order-logged-out.service';\n\n    export const slspIllSigninOrderLoggedOutModule = angular\n        .module('slspIllSigninOrderLoggedOutModule', [])\n            .factory('slspIllSigninOrderLoggedOutService', slspIllSigninOrderLoggedOutService)\n            .controller('slspIllSigninOrderLoggedOutController', slspIllSigninOrderLoggedOutController)\n            .component('slspIllSigninOrderLoggedOutComponent',  {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIllSigninOrderLoggedOutController',\n                \n            })\n    ","\n\n    export const slspIllSigninOrderLoggedOutService = ['jwtHelper', function( jwtHelper ){\n\n        function getDecodedToken(){\n            try{\n                if (!sessionStorage){\n                    console.error(\"***SLSP*** no session storage\")\n                    return null;\n                }\n                let jwt = sessionStorage.getItem('primoExploreJwt');\n                if (!jwt){\n                    return null;\n                }\n                return jwtHelper.decodeToken(jwt);\n            }\n            catch(e){\n                console.error(\"**SLSP*** an error occured: userService.getDecodedToken:\");\n                console.error(e.message);\n            }\n        }\n  \n        function isGuest(){\n            try{\n                let decodedToken = getDecodedToken();\n                if (!decodedToken) {\n                    return null;\n                }\n                let userName= decodedToken.userGroup !== 'GUEST'? decodedToken.userName : '';\n                if (userName){\n                    return false;\n                }\n                else{\n                    return true;\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: userService.isGuest:\");\n                console.error(e.message);\n            }\n        }\n    \n        return {\n            isGuest: isGuest,\n            getDecodedToken: getDecodedToken\n        };\n    }]\n    ","import {bcuLangSwitchModule} from './bcu-lang-switch/bcu-lang-switch.module';\nimport {slspIllSigninOrderLoggedOutModule} from './slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.module';\n\nexport const slspUserAreaExpandableAfterModule = angular\n    .module('slspUserAreaExpandableAfterModule', [])\n        .component('prmUserAreaExpandableAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<bcu-lang-switch-component after-ctrl=\"$ctrl\"></bcu-lang-switch-component><slsp-ill-signin-order-logged-out-component after-ctrl=\"$ctrl\"></slsp-ill-signin-order-logged-out-component>`,\n        });\n\nslspUserAreaExpandableAfterModule.requires.push(bcuLangSwitchModule.name);\nslspUserAreaExpandableAfterModule.requires.push(slspIllSigninOrderLoggedOutModule.name);","require('./js/slsp-archives-htgi.module.js')\nmodule.exports = 'slspArchivesHtgi'\n","angular\n    .module('slspArchivesHtgi', [])\n\n    // \"how to get it\" section for resources of archives MFA, TMA (CMI STAR)\n\n    .controller('ArchivesHtgiController', [function () {\n\n        this.$onInit = function () {\n            try{\n                if(!this.parentCtrl.item.pnx.display.source || this.parentCtrl.item.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.item.pnx.display.source[0];\n                // CMI STAR sources\n                if(this.source === 'ETH_MaxFrischArchiv' || this.source === 'ETH_ThomasMannArchiv'){\n                    // hide content of htgi section\n                    let section = document.getElementById('full-view-container');\n                    section.classList.add('slsp-archives-hide');\n\n                    // get guid of CMIStar\n                    let sourceid = this.parentCtrl.item.pnx.control.originalsourceid[0];\n                    let guid = sourceid.substring(sourceid.lastIndexOf(':') + 1);\n\n                    // different sources: concat url\n                    if(this.source === 'ETH_ThomasMannArchiv'){\n                        this.url = 'http://www.online.tma.ethz.ch/home/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Detailed information in Thomas Mann-Archiv Online (metadata only)';\n                    }\n                    else if (this.source === 'ETH_MaxFrischArchiv') {\n                        this.url = 'http://maxfrischarchiv-online.ethz.ch/home/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Request via Max Frisch-Archiv Online';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesHtgiController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n\n    .component('almaHtgiSvcAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesHtgiController',\n        template: `\n        <div class=\"slsp-archives\" ng-if=\"$ctrl.url\">\n            <md-list layout=\"column\" class=\"separate-list-items md-primoExplore-theme layout-column\" role=\"list\">\n                <md-list-item role=\"listitem\" ng-href=\"{{$ctrl.url}}\" target=\"_blank\">\n                      <span>{{('customized.archives.' + $ctrl.source + '.linktext' | translate)}}</span>\n                    <span>{{$ctrl.label}}</span>\n                    <div class=\"md-secondary\">\n                        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\" class=\"layout-margin\"/>\n                    </div>\n                </md-list-item>\n            </md-list>\n            <div ng-if=\"$ctrl.source === 'ETH_ThomasMannArchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_ThomasMannArchiv.text1\">No request possible. The digitized item can be consulted in the Thomas Mann Archives reading room upon advance registration (</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"https://tma.ethz.ch/utils/kontakt.html\">\n                        <span translate=\"customized.archives.ETH_ThomasMannArchiv.linktext2\">Contact</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_ThomasMannArchiv.text2\">).</span>\n                </div>\n            </div>\n            <div ng-if=\"$ctrl.source === 'ETH_MaxFrischArchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_MaxFrischArchiv.text1\">Informationen zu Bestellung und Benutzung siehe</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"http://maxfrischarchiv-online.ethz.ch/home/#/manual\">\n                        <span translate=\"customized.archives.ETH_MaxFrischArchiv.linktext2\">Bedienungshinweise</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_MaxFrischArchiv.text2\">.</span>\n                </div>\n            </div>\n        </div>\n        `\n    });\n","require('./js/slsp-archives-viewit.module.js')\nmodule.exports = 'slspArchivesViewit'\n","angular\n.module('slspArchivesViewit', [])\n\n    .component('prmSearchResultAvailabilityLineAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesAvailabilityLineController'\n    })\n\n    .component('prmAlmaViewitAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesViewitController',\n        template: `\n        <div class=\"slsp-archives\" ng-if=\"$ctrl.url\">\n            <md-list layout=\"column\" class=\"separate-list-items md-primoExplore-theme layout-column\" role=\"list\">\n                <md-list-item role=\"listitem\" ng-href=\"{{$ctrl.url}}\" target=\"_blank\">\n                    <span>{{('customized.archives.' + $ctrl.source + '.linktext' | translate)}}</span>\n                    <span>{{$ctrl.label}}</span>\n                    <div class=\"md-secondary\">\n                        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\" class=\"layout-margin\"/>\n                    </div>\n                </md-list-item>\n            </md-list>\n            <div ng-if=\"$ctrl.source === 'ETH_Hochschularchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_Hochschularchiv.text1\">Informationen zu Bestellung und Benutzung siehe</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"http://archivdatenbank-online.ethz.ch/hsa/#/manual\">\n                        <span translate=\"customized.archives.ETH_Hochschularchiv.linktext2\">Bedienungshinweise</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_Hochschularchiv.text2\">.</span>\n                </div>\n            </div>\n        </div>\n        `\n        })\n\n    // viewit section for archives when there are only partial digitized items, e.g. \"ETH Hochschularchiv\" (CMI STAR)\n    .controller('ArchivesViewitController', ['$translate', function ($translate) {\n        this.$onInit = function () {\n            try{\n                if(!this.parentCtrl.item.pnx.display.source || this.parentCtrl.item.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.item.pnx.display.source[0];\n                // CMI STAR sources\n                if(this.source === 'ETH_Hochschularchiv'){\n                    if(this.parentCtrl.item.delivery.GetIt1 && this.parentCtrl.item.delivery.GetIt1.length > 0 && this.parentCtrl.item.delivery.GetIt1[0].links && this.parentCtrl.item.delivery.GetIt1[0].links.length > 0){\n\n                        // there is an online resource: return and do nothing\n                        let aOnlineLink = this.parentCtrl.item.delivery.GetIt1[0].links.filter( l => {\n                            if(l.isLinktoOnline && l.link !== ''){\n                                return true;\n                            }\n                            return false;\n                        });\n                        if (aOnlineLink.length > 0) {\n                            return;\n                        }\n\n                        // there is no online resource\n                        // change section heading\n                        $translate('nui.getit.service_howtogetit').then((translation) => {\n                            let fullView = document.getElementById('fullView');\n                            angular.element(fullView.querySelector(\"h4[translate='nui.getit.service_viewit']\")).text(translation);\n                            angular.element(fullView.querySelector(\"#services-index span[translate='nui.getit.service_viewit']\")).text(translation);\n                        });\n\n                    }\n                    // hide content of viewit section\n                    let section = document.getElementById('full-view-container');\n                    section.classList.add('slsp-archives-hide');\n\n                    // get guid of CMIStar\n                    let sourceid = this.parentCtrl.item.pnx.control.originalsourceid[0];\n                    let guid = sourceid.substring(sourceid.lastIndexOf(':') + 1);\n\n                    // different sources: concat url\n                    if(this.source === 'ETH_Hochschularchiv'){\n                        this.url = 'http://archivdatenbank-online.ethz.ch/hsa/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Bestellen über Hochschularchiv Online';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesViewitController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n\n    // change availability line, if there is no digitization\n    .controller('ArchivesAvailabilityLineController', ['$translate', function ($translate) {\n        this.$onInit = function () {\n            try{\n                this.changeButton = false;\n                if(!this.parentCtrl.result.pnx.display.source || this.parentCtrl.result.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.result.pnx.display.source[0];\n                if(!this.source === 'ETH_Hochschularchiv')return;\n                if(!this.parentCtrl.result.delivery.GetIt1 || this.parentCtrl.result.delivery.GetIt1.length == 0 || !this.parentCtrl.result.delivery.GetIt1[0].links || this.parentCtrl.result.delivery.GetIt1[0].links.length == 0)return;\n\n                let aOnlineLink = this.parentCtrl.result.delivery.GetIt1[0].links.filter( l => {\n                    if(l.isLinktoOnline && l.link !== ''){\n                        return true;\n                    }\n                    return false;\n                });\n                if (aOnlineLink.length === 0) {\n                    // there is no online resource\n                    $translate('delivery.code.no_inventory').then((translation) => {\n                        this.changeButton = true;\n                        this.changeButtonText = translation;\n                    });\n                    let availabilityLine = this.parentCtrl.$element[0];\n                    if(availabilityLine) {\n                        availabilityLine.classList.add('slsp-hsa-no-online');\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesAvailabilityLineController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n\n        this.$doCheck = function () {\n            try{\n                if (this.changeButton){\n                    let availabilityLine = this.parentCtrl.$element[0];\n                    let button = availabilityLine.querySelector('.availability-status');\n                    if(angular.element(button) && angular.element(button).length > 0){\n                        angular.element(button).html(this.changeButtonText);\n                        this.changeButton = false;\n                        this.changeButtonText = '';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***ETH*** an error occured: ArchivesAvailabilityLineController $doCheck\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n","require('./js/slsp-courier-info.module.js')\nmodule.exports = 'slspCourierInfo'","angular\n    .module('slspCourierInfo', [])\n\n    //--------Fees messages ---------------------------------------\n\n    .controller('CourierInfoController', ['$element', function ($element) {\n\n        //shortcut for convenience\n\n        this.form = $element[0].parentElement;\n\n        //function for inserting block\n\n        this.$doCheck = function () {\n            let form = false;\n            let formLength = 2;\n            if (this.form.children[0].children[1] !== undefined && this.form.children[0].children[1].children[0] !== undefined) {\n                form = this.form.children[0].children[1].children[0];\n            }\n            else if (this.form.children[0].children[0] !== undefined && this.form.children[0].children[0].children[0] !== undefined) {\n                form = this.form.children[0].children[0].children[0];\n                formLength = 3;\n            }\n\n            //create and insert info block if not present\n\n            if (form && form.children.length == formLength) {\n                let info = document.createElement('DIV');\n                info.className = \"courier-info bar alert-bar\";\n                info.innerHTML =\n                `<h4>${this.parentCtrl.$translate.instant('customize.fullview.feesTitle')}</h4>\n\t\t<p>${this.parentCtrl.$translate.instant('customize.fullview.feesInfo')}</p>\n\t\t<p><a href=\"${this.parentCtrl.$translate.instant('customize.fullview.feesUrl')}\"\n\t\ttarget=\"_blank\">${this.parentCtrl.$translate.instant('customize.fullview.feesLinkText')}</a></p>`;\n                form.insertBefore(info, form.children[formLength - 1]);\n            }\n        }\n\n    }])\n\n    .component('prmRequestAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'CourierInfoController'\n    });\n","require('./js/slsp-edit-personal-details.module.js')\nmodule.exports = 'slspEditPersonalDetails'","\n\nangular\n    .module('slspEditPersonalDetails', [])\n\n\n\n    //------------------------------ edit personal details  ---------------------------\n\n    .controller('EditPersonalDetailsController', ['$scope', function ($scope) {\n\n        let lang = 'en';\n        let sms = $scope.$root.$$childHead.$ctrl.userSessionManagerService;\n        if (sms) {\n            lang = sms.getInterfaceLanguage();\n        }\n\n        this.detailsBaseEdu = \"https:\\/\\/eduid.ch\\/web\\/change-account-data\\/2\\/?lang=\" + lang;\n        this.detailsBaseReg = \"https:\\/\\/registration.slsp.ch\\/library-card\\/?lang=\" + lang;\n        this.exclude = ['STAFF', '11', '12', '13', '14', '15', '16', '91', '92', '99'];\n        this.grpA = ['11', '91', '92'];\n        this.grpB = ['12', '13', '14', '15', '16'];\n\n\n        this.getPatronGrp = function() {\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\n                let patron = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n                if (!this.exclude.includes(patron)) {\n                    return true;\n                }\n                else {\n                    return false;\n            }\n        }\n            return false;\n        }\n\n        this.grpLabelA = function() {\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\n                let labelA = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n                if (this.grpA.includes(labelA)) {\n                    return true;\n                }\n                else {\n                    return false;\n            }\n        }\n            return false;\n        }\n\n    \n        this.grpLabelB = function() {\n            if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\n                let labelB = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n                if (this.grpB.includes(labelB)) {\n                    return true;\n                }\n                else {\n                    return false;\n            }\n        }\n            return false;\n        }\n\n \n    }])\n\n\n    .component('prmPersonalInfoAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'EditPersonalDetailsController',\n        template: '<md-card ng-if=\"$ctrl.grpLabelA()\" translate=\"customized.libraries.details\" flex=\"100\" class=\"bar alert-bar courier-info\"></md-card><md-card ng-if=\"$ctrl.grpLabelB()\" translate=\"customized.slsp.details\" flex=\"100\" class=\"bar alert-bar courier-info\"></md-card>       <div layout=\"column\"> <md-button ng-if=\"$ctrl.getPatronGrp()\" href=\"{{ $ctrl.detailsBaseEdu }}\" target=\"_blank\" layout=\"row\" class=\"courier-info bar alert-bar layout-align-left-center layout-row\" layout-align=\"left center\"><span class=\"md-subhead\"><prm-icon  class=\"rotate-20 margin-right-small\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"pencil\"></prm-icon><span  class=\"md-subhead\" translate=\"customized.personal.details\"></span></md-button>   <br />   <md-button ng-if=\"$ctrl.getPatronGrp()\" href=\"{{ $ctrl.detailsBaseReg }}\" target=\"_blank\" layout=\"row\" class=\"courier-info bar alert-bar layout-align-left-center layout-row\" layout-align=\"left center\"><prm-icon class=\"rotate-20 margin-right-small\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"account-card-details\"></prm-icon><span  class=\"md-subhead\" translate=\"customized.libcard.number\"></span></md-button ></div> '\n\n    });\n","require('./js/slsp-http-intercept-requests.module.js')\nmodule.exports = 'slspHttpInterceptRequests'","angular.module('slspHttpInterceptRequests', ['ng'])\n    .config(['$httpProvider', ($httpProvider) => {\n        $httpProvider.interceptors.push(['$q', ($q) => {\n            return {\n                'request': (request) => {\n                    return request\n                },\n                'requestError': (request) => {\n                    return $q.reject(request)\n                },\n                'responseError': (response) => {\n                    return $q.reject(response)\n                },\n                'response': (response) => {\n                    try {\n                        if (/primaws\\/rest\\/priv\\/myaccount\\/requests/.test(response.config.url)) {\n                            let interfaceLanguage = angular.element(document.querySelector('primo-explore')).injector().get('$rootScope').$$childHead.$ctrl.userSessionManagerService.getUserLanguage() ||\n                                window.appConfig['primo-view']['attributes-map'].interfaceLanguage\n\n                            let list_of_hold_states = {\n                                'en': [\"in transit\", \"in process\", \"on hold shelf\"],\n                                'de': [\"transfer\", \"in bearbeitung\", \"bereitgestellt\"],\n                                'fr': [\"en cours de transfert\", \"en cours\", \"sur le rayon des réservations\"],\n                                'it': [\"in transito\", \"in processo\", \"scaffale prenotazioni\"]\n                            }\n\n                            if (Object.keys(list_of_hold_states).includes(interfaceLanguage)) {\n                                let list_of_hold_states_regexp = RegExp(list_of_hold_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                if (response.status == 200 && response.data.status == \"ok\") {\n\n                                    //rewrite all cancellable holds.\n                                    response.data.data.holds.hold.map((m) => {\n                                        if (list_of_hold_states_regexp.test(m.holdstatus.toLowerCase())) {\n                                            m.cancel = 'N'\n                                        }\n                                    })\n\n                                }\n                            } else {\n                                throw `No mapping found for ${interfaceLanguage}`\n                            }\n                        }\n                    } catch (error) {\n                        console.log(error)\n                    }\n                    return response\n                }\n            }\n        }])\n    }])","require('./js/slsp-ill-signin-order-alert.module.js')\nmodule.exports = 'slspIllSigninOrderAlert'","//--------ILL Signin Order -  if Alert Message ---------------------------------------\n\nangular\n    .module('slspIllSigninOrderAlert', [])\n\n    .controller('AlertMsgController', ['$scope', function ($scope) {\n        var vm = this;\n        vm.getAlert = getAlert\n\n        function getAlert() {\n            var ga = vm.parentCtrl.almaHowToGetitService.reqAlert._htmlMsg;\n            var myEl2 = angular.element(document.querySelector('primo-explore'));\n\n            if (ga.length > 0) {\n                return myEl2.addClass('alert');\n\n            }\n            else {\n\n                return myEl2.removeClass('alert');\n\n            }\n        }\n\n    }])\n\n    .component('almaHowovpAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'AlertMsgController',\n        template: '<div style=\"display:none\">{{$ctrl.getAlert()}}</div>'\n    });\n"]}
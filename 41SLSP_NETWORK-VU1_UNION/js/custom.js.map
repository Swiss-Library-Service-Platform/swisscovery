{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/main.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-alma-other-members-after/prm-alma-other-members-after.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-alma-other-members-after/slsp-collapse-other-inst/slsp-collapse-other-inst.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-alma-other-members-after/slsp-collapse-other-inst/slsp-collapse-other-inst.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-loan-after/slsp-loan-after.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-loan-after/slsp-renew-item-text/slsp-renew-item-text.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-loan-after/slsp-renew-item-text/slsp-renew-item-text.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/eth-location-items-after.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/eth-mapongo/eth-config.service.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/eth-mapongo/eth-mapongo-check.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/eth-mapongo/eth-mapongo-check.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/eth-mapongo/eth-mapongo-libraries.service.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/eth-mapongo/eth-mapongo.config.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/eth-mapongo/eth-mapongo.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/eth-mapongo/eth-mapongo.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/slsp-i-button/slsp-i-button.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-location-items-after/slsp-i-button/slsp-i-button.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-locations-after/eth-locations-after.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-locations-after/eth-locations-filter/eth-locations-filter.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-locations-after/eth-locations-filter/eth-locations-filter.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-personal-info-after/slsp-edit-personal-details/slsp-edit-personal-details.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-personal-info-after/slsp-edit-personal-details/slsp-edit-personal-details.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-personal-info-after/slsp-personal-info-after.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-user-area-expandable-after/bcu-lang-switch/bcu-lang-switch.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-user-area-expandable-after/bcu-lang-switch/bcu-lang-switch.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.controller.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.service.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/prm-user-area-expandable-after/slsp-user-area-expandable-after.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-archives-htgi/index.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-archives-htgi/js/slsp-archives-htgi.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-archives-viewit/index.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-archives-viewit/js/slsp-archives-viewit.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-courier-info/index.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-courier-info/js/slsp-courier-info.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-http-intercept-requests/index.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-http-intercept-requests/js/slsp-http-intercept-requests.module.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-ill-signin-order-alert/index.js","primo-explore/custom/41SLSP_NETWORK-sprint2_UNION/js/slsp-ill-signin-order-alert/js/slsp-ill-signin-order-alert.module.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","angular","_slspCollapseOtherInst","prmAlmaOtherMembersAfterModule","component","bindings","parentCtrl","template","requires","push","slspCollapseOtherInstModule","name","slspCollapseOtherInstController","_classCallCheck","this","afterCtrl","isCollapsed","$inject","controller","_slspRenewItemText","slspLoanAfterModule","slspRenewItemTextModule","slspRenewItemTextController","getRenewText","undefined","item","renewstatuses","renewstatus","console","error","message","_ethMapongoCheck","_ethMapongo","_slspIButton","ethLocationItemsAfterModule","ethMapongoCheckModule","ethMapongoModule","slspIButtonModule","ethConfigService","$rootScope","getLanguage","sms","$$childHead","$ctrl","userSessionManagerService","getUserLanguage","$window","appConfig","interfaceLanguage","getLabel","config","key","lang","label","getUrl","url","ethMapongoCheckController","$scope","$compile","$element","ethMapongoLibrariesService","isMapongoLibrary","noLocationItemAfter","locationItemAfter","parentElement","getElementsByTagName","loc","location","libraryCode","aPrmLocationItemAfter","slice","recordid","pnx","control","sourcerecordid","items","addCallnumberEntry","barcodeEntry","prmLocationItemAfter","querySelector","isMapongoSubLocation","_additionalData","secondarylocationname","isAvailable","itemstatusname","subLocationCode","getSubLocationCode","callnumber","fullItemFields","filter","indexOf","addCallnumber","replace","barcode","element","append","_ethMapongoLibraries","factory","libraries","shortname","baseUrl","locationCodeWhiteList","locationWhiteList","availabilityStatus","l","subLocation","getBaseUrl","lib","filterLibraries","s","ethMapongoConfig","qrc","de","en","fr","ethMapongoController","src","encodeURIComponent","sublocation","_ethConfig","_ethMapongo2","slspIButtonController","getLibrary","currLoc","librarycodeTranslation","getLibraryCode","$location","$$search","biblinkText","biblinkBase","_ethLocationsFilter","ethLocationsAfterModule","ethLocationsFilterModule","ethLocationsFilterController","$timeout","_this","$watch","newValue","oldValue","scope","isLocationsFilterVisible","slspEditPersonalDetailsController","$root","getInterfaceLanguage","detailsBaseEdu","detailsBaseReg","exclude","grpA","grpB","getPatronGrp","personalInfoService","personalInfo","patron","patronstatus","registration","institution","patronstatuscode","includes","grpLabelA","labelA","grpLabelB","labelB","buttonMove","document","_slspEditPersonalDetails","slspEditPersonalDetailsModule","slspPersonalInfoAfterModule","bcuLangSwitchController","$parent","parent","languages","changeLanguage","changeLangService","addLangParamToUrl","i18nService","setLanguage","then","$state","go","current","reload","_bcuLangSwitch","bcuLangSwitchModule","slspIllSigninOrderLoggedOutController","slspIllSigninOrderLoggedOutService","usrNme","isGuest","removeClass","addClass","_slspIllSigninOrderLoggedOut","_slspIllSigninOrderLoggedOut2","slspIllSigninOrderLoggedOutModule","jwtHelper","getDecodedToken","sessionStorage","jwt","getItem","decodeToken","decodedToken","userGroup","userName","slspUserAreaExpandableAfterModule","$onInit","display","source","sourceid","guid","getElementById","classList","add","originalsourceid","substring","lastIndexOf","$translate","delivery","GetIt1","links","isLinktoOnline","link","translation","fullView","text","availabilityLine","changeButton","result","changeButtonText","$doCheck","button","html","form","info","formLength","children","createElement","className","innerHTML","instant","insertBefore","slspHttpInterceptRequests","$httpProvider","interceptors","$q","request","_request","requestError","reject","responseError","response","_response","test","status","data","injector","get","window","list_of_hold_states","it","list_of_photocopy_states","Object","keys","list_of_hold_states_regexp","RegExp","map","m","toLowerCase","join","holds","hold","holdstatus","cancel","list_of_photocopy_states_regexp","photocopies","photocopy","requeststatus","vm","getAlert","ga","almaHowToGetitService","reqAlert","_htmlMsg","myEl2"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\n//import './slsp-i-button';\nimport './slsp-courier-info';\n//import './slsp-ill-signin-order-logged-out';\nimport './slsp-ill-signin-order-alert';\n//import './slsp-edit-personal-details';\nimport './prm-locations-after';\nimport './prm-location-items-after';\nimport './slsp-archives-htgi';\nimport './slsp-archives-viewit';\nimport './slsp-http-intercept-requests';\nimport './prm-user-area-expandable-after';\nimport './prm-loan-after';\nimport './prm-personal-info-after';\nimport './prm-alma-other-members-after';\n\nvar app = angular.module('viewCustom', ['angularLoad', 'slspCourierInfo', 'slspIllSigninOrderAlert', 'ethLocationsAfterModule', 'ethLocationItemsAfterModule', 'slspArchivesHtgi', 'slspArchivesViewit','slspHttpInterceptRequests', 'slspUserAreaExpandableAfterModule', 'slspLoanAfterModule', 'slspPersonalInfoAfterModule', 'prmAlmaOtherMembersAfterModule' ]);\n\n","\nimport {slspCollapseOtherInstModule} from './slsp-collapse-other-inst/slsp-collapse-other-inst.module';\n\nexport const prmAlmaOtherMembersAfterModule = angular\n    .module('prmAlmaOtherMembersAfterModule', [])\n        .component('prmAlmaOtherMembersAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-collapse-other-inst-component after-ctrl=\"$ctrl\"></slsp-collapse-other-inst-component><slsp-alma-other-members-after parent-ctrl=\"$parent.$ctrl\"></slsp-alma-other-members-after>`\n        });\n\nprmAlmaOtherMembersAfterModule.requires.push(slspCollapseOtherInstModule.name);\n","\r\n\r\n//--------CollapseOtherInst ---------------------------------------\r\n\r\n\r\nexport class slspCollapseOtherInstController {\r\n\r\n    constructor() {\r\n       \r\n        this.parentCtrl = this.afterCtrl.parentCtrl;\r\n        this.parentCtrl.isCollapsed = true;\r\n        \r\n        }   \r\n        \r\n    }\r\n\r\n\r\nslspCollapseOtherInstController.$inject = [];\r\n\r\n","\r\n    import {slspCollapseOtherInstController} from './slsp-collapse-other-inst.controller';\r\n    import {slspCollapseOtherInstHtml} from './slsp-collapse-other-inst.html';\r\n\r\n    export const slspCollapseOtherInstModule = angular\r\n        .module('slspCollapseOtherInstModule', [])\r\n            .controller('slspCollapseOtherInstController', slspCollapseOtherInstController)\r\n            .component('slspCollapseOtherInstComponent', {\r\n                bindings: {afterCtrl: '<'},\r\n                controller: 'slspCollapseOtherInstController',\r\n                template: slspCollapseOtherInstHtml\r\n            })","\nimport {slspRenewItemTextModule} from './slsp-renew-item-text/slsp-renew-item-text.module';\n\nexport const slspLoanAfterModule = angular\n    .module('slspLoanAfterModule', [])\n        .component('prmLoanAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-renew-item-text-component after-ctrl=\"$ctrl\"></slsp-renew-item-text-component>`\n        });\n\nslspLoanAfterModule.requires.push(slspRenewItemTextModule.name);\n","//--------Renewstatus display of loan items ---------------------------------------\r\n\r\nexport class slspRenewItemTextController {\r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    $onInit() {\r\n        try {\r\n            this.parentCtrl = this.afterCtrl.parentCtrl;\r\n            this.getRenewText = getRenewText;\r\n\r\n            function getRenewText() {\r\n                if (this.parentCtrl.item.renewstatuses !== undefined && this.parentCtrl.item.renewstatuses.renewstatus[0] !== undefined) {\r\n                    return this.parentCtrl.item.renewstatuses.renewstatus[0];\r\n                }\r\n                else {\r\n                    return\r\n                }\r\n            }\r\n        }\r\n\r\n        catch (e) {\r\n            console.error(\"***SLSP*** an error occured: slspRenewItemTextController\\n\\n\");\r\n            console.error(e.message);\r\n        }\r\n    }\r\n}\r\n\r\nslspRenewItemTextController.$inject = [];\r\n\r\n","\r\n\r\n\r\n\r\n\r\n    import {slspRenewItemTextController} from './slsp-renew-item-text.controller';\r\n    import {slspRenewItemTextHtml} from './slsp-renew-item-text.html';\r\n\r\n    export const slspRenewItemTextModule = angular\r\n        .module('slspRenewItemTextModule', [])\r\n            .controller('slspRenewItemTextController', slspRenewItemTextController)\r\n            .component('slspRenewItemTextComponent', {\r\n                bindings: {afterCtrl: '<'},\r\n                controller: 'slspRenewItemTextController',\r\n                template: slspRenewItemTextHtml\r\n            })","import { ethMapongoCheckModule } from './eth-mapongo/eth-mapongo-check.module';\r\nimport { ethMapongoModule } from './eth-mapongo/eth-mapongo.module';\r\nimport { slspIButtonModule } from './slsp-i-button/slsp-i-button.module';\r\n\r\nexport const ethLocationItemsAfterModule = angular\r\n    .module('ethLocationItemsAfterModule', [])\r\n    .component('prmLocationItemsAfter', {\r\n        bindings: { parentCtrl: '<' },\r\n        template: \r\n\t\t`\r\n\t\t<eth-mapongo-check after-ctrl=\"$ctrl\"></eth-mapongo-check>\r\n        <slsp-i-button-component after-ctrl=\"$ctrl\"></slsp-i-button-component>\r\n\t\t`\r\n    });\r\n\r\nethLocationItemsAfterModule.requires.push(ethMapongoCheckModule.name);\r\nethLocationItemsAfterModule.requires.push(ethMapongoModule.name);\r\nethLocationItemsAfterModule.requires.push(slspIButtonModule.name);\r\n","/**\n* @ngdoc service\n* @key ethConfigService\n*\n* @description\n*\n* Service to get and handle informations from a module config:\n* - getLabel()\n* - getUrl()\n* - getLanguage()\n*\n */\nexport const ethConfigService = ['$rootScope', function( $rootScope ){\n\n    function getLanguage(){\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService;\n            if (!sms) {\n                console.error(\"***ETH*** ethConfigService: userSessionManagerService not available\");\n                return 'en';\n            }\n            else{\n                return sms.getUserLanguage() || $window.appConfig['primo-view']['attributes-map'].interfaceLanguage;\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethConfigService.getLanguage():\");\n            console.error(e.message);\n            return 'en';\n        }\n    }\n\n\n    function getLabel(config, key) {\n        try{\n            let lang = this.getLanguage();\n            if (!config.label[key]) {\n                console.error(\"***ETH*** ethConfigService.getLabel: '\" + key + \"' not in config\");\n                return key;\n            }\n            if(config.label[key][lang]){\n                return config.label[key][lang];\n            }\n            else{\n                return config.label[key]['en'];\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethConfigService.getLabel():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n\n    function getUrl(config, key) {\n        try{\n            let lang = this.getLanguage();\n            if (!config.url[key]) {\n                console.error(\"***ETH*** ethConfigService.getUrl: '\" + key + \"' not in config\");\n                return '';\n            }\n            if(config.url[key][lang]){\n                return config.url[key][lang];\n            }\n            else{\n                return config.url[key]['en'];\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethConfigService.getUrl():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n\n    return {\n        getLanguage: getLanguage,\n        getLabel: getLabel,\n        getUrl: getUrl\n    };\n}]\n","export class ethMapongoCheckController {\n\n    constructor( $scope, $compile, $element, ethMapongoLibrariesService ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$element = $element;\n        this.ethMapongoLibrariesService = ethMapongoLibrariesService;\n        this.isMapongoLibrary = true;\n        this.noLocationItemAfter = 0;\n     }\n\n    $onInit() {\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n    }\n\n    $doCheck() {\n        try{\n            // are location item elements loaded and rendered? Or \"show more items\" pushed?\n            let locationItemAfter = this.$element[0].parentElement.parentElement.getElementsByTagName('prm-location-item-after');\n            let noLocationItemAfter = locationItemAfter.length;\n            if(noLocationItemAfter <= this.noLocationItemAfter){\n                return;\n            }\n            this.noLocationItemAfter = noLocationItemAfter;\n\n            // mapongo library?\n            if(!this.isMapongoLibrary)return;\n            if (!this.ethMapongoLibrariesService.isMapongoLibrary(this.parentCtrl.loc.location.libraryCode)) {\n                this.isMapongoLibrary = false;\n                return;\n            }\n\n            // array of html collection prm-location-item-after\n            let aPrmLocationItemAfter = [].slice.call(locationItemAfter);\n            this.recordid = this.parentCtrl.item.pnx.control.sourcerecordid[0];\n\n            // iterate items of a location (Exemplare), get reference to after directive of location-item and inject eth-mapongo-directive\n            for(let i = 0; i < this.parentCtrl.loc.items.length; i++){\n                if(i >= aPrmLocationItemAfter.length){\n                    // more items than initially rendered\n                    return;\n                }\n\n                let item = this.parentCtrl.loc.items[i];\n                let prmLocationItemAfter = aPrmLocationItemAfter[i];\n\n                // is mapongo directive already injected?\n                let ethMapongo = prmLocationItemAfter.querySelector('eth-mapongo');\n                if(!!ethMapongo){\n                    continue;\n                }\n\n                if (!this.ethMapongoLibrariesService.isMapongoSubLocation(this.parentCtrl.loc.location.libraryCode, item._additionalData.secondarylocationname)) {\n                    continue;\n                }\n\t\t\t\t\n                if(!this.ethMapongoLibrariesService.isAvailable(item._additionalData.itemstatusname)){\n                    continue;\n                }\n\t\t\t\t\n\n                this.subLocationCode = this.ethMapongoLibrariesService.getSubLocationCode(this.parentCtrl.loc.location.libraryCode, item._additionalData.secondarylocationname);\n                this.callnumber = item._additionalData.callnumber;\n                let addCallnumberEntry = item.fullItemFields.filter(function(e) {return e.indexOf(\"Zusätzliche Signatur:\") > -1 || e.indexOf(\"Additional call number:\") > -1;} );\n                this.addCallnumber = \"\";\n                if (addCallnumberEntry.length > 0) {\n                    this.addCallnumber = addCallnumberEntry[0].replace(\"Zusätzliche Signatur: \",\"\").replace(\"Additional call number: \",\"\");\n                }\n                if(this.addCallnumber != \"\"){\n                    // todo: is it always correct to use 'Additional call number' if it exists?\n                    this.callnumber = this.addCallnumber;\n                }\n\n                let barcodeEntry = item.fullItemFields.filter(function(e) {return e.indexOf(\"Barcode:\") > -1 || e.indexOf(\"Strichcode:\") > -1;} );\n                this.barcode = \"\";\n                if (barcodeEntry.length > 0) {\n                    this.barcode = barcodeEntry[0].replace(\"Barcode: \",\"\").replace(\"Strichcode: \",\"\");\n                }\n\t\t\t\t\n                // inject eth-mapongo element (handled by eth-mapongo.module)\n                angular.element(prmLocationItemAfter).append(this.$compile('<eth-mapongo after-ctrl=\"$ctrl\" class=\"eth-mapongo-container\" recordid=\"' + this.recordid + '\" barcode=\"' + this.barcode + '\" callnumber=\"' + this.callnumber + '\" sublocation=\"' + this.subLocationCode + '\"parent-ctrl=\"$ctrl.parentCtrl\"></eth-mapongo>')(this.$scope));\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** ethMapongoCheckController.$doCheck:\");\n            console.error(e.message);\n        }\n\n    }\n}\n\nethMapongoCheckController.$inject = [ '$scope', '$compile', '$element', 'ethMapongoLibrariesService'];\n","/**\n* @ngdoc module\n* @name ethMapongoCheckModule\n*\n* @description\n* checks if mapongo should be injected\n* - checks if the current library and location (Standort) are registered for Mapongo\n* - checks the item status\n* - may inject an eth-mapongo directive and specific attributes for it in prm-location-item-after (handled by eth-mapongo.module.js)\n*\n* A prm controller works only for prmLocationItems. There is no prmLocationItem controller\n* $ctrl in prmLocationItemAfter is a reference to prmLocationItems Controller\n*\n* If there is 1 location: prmLocationItemsAfter\n*\n* If there are multiple locations: prmLocationAfter;\n* after all locations: prmLocationsAfter;\n* after choosing a location: prmLocationItemsAfter\n*\n*\n* <b>AngularJS Dependencies</b><br>\n* Service {@link ETH.ethMapongoLibrariesService}<br>\n*\n*\n* <b>CSS/Image Dependencies</b><br>\n*\n*\n* @example\n* ZHAW MMS IDs: 991128155109705501, 990013732410205503; 2 Exemplare: 990058665580205503; 5 Exemplare: 991129451879705501\n*\n*/\nimport {ethMapongoLibrariesService} from './eth-mapongo-libraries.service';\nimport {ethMapongoCheckController} from './eth-mapongo-check.controller';\n\nexport const ethMapongoCheckModule = angular\n    .module('ethMapongoCheckModule', [])\n        .factory('ethMapongoLibrariesService', ethMapongoLibrariesService)\n        .controller('ethMapongoCheckController', ethMapongoCheckController)\n        .component('ethMapongoCheck', {\n            bindings: {afterCtrl: '<'},\n            controller: 'ethMapongoCheckController'\n        })\n","/**\n* @ngdoc service\n* @name ethMapongoLibrariesService\n*\n* @description\n*\n* Holds informations about the libraries which use mapongo\n*\n*\n* <b>Used by</b><br>\n*\n* Module {@link ETH.ethMapongoModule}<br>\n*\n*\n */\nexport const ethMapongoLibrariesService = [function(){\n    // todo: are the locations correct and complete?\n    const libraries = [\n            {\n                    \"shortname\": \"ZHdK-MIZ\",\n                    \"name\": \"ZHdK-MIZ\",\n                    \"libraryCode\": \"E65\",\n                    \"baseUrl\": \"https://zhdk.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"E65G1\",\"E65G2\",\"E65E1\",\"E65U1\",\"E65U4\"],\n                    \"locationWhiteList\": [\"Galeriegeschoss\",\"Galeriegeschoss\",\"Eingangsgeschoss\",\"Untergeschoss\",\"Untergeschoss Curating Degree Zero Archive\"]\n            },\n            {\n                    \"shortname\": \"ZHAW-HSB-ZH\",\n                    \"name\": \"ZHAW Hochschulbibliothek Zürich\",\n                    \"libraryCode\": \"E97\",\n                    \"baseUrl\": \"https://zhdk.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"E97E1\"],\n                    \"locationWhiteList\": [\"Eingangsgeschoss\"]\n            },\n            {\n                    \"shortname\": \"ZHAW-HSB-WIN\",\n                    \"name\": \"ZHAW Hochschulbibliothek Winterthur\",\n                    \"libraryCode\": \"E51\",\n                    \"baseUrl\": \"https://zhaw.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"E51BA\",\"E51B0\",\"E51B9\",\"E51B2\",\"E51B8\",\"E51BN\",\"E51BL\",\"E51BG\",\"E51BT\",\"E51BB\",\"E51BW\",\"E51BA\",\"E51BK\",\"E51BR\"],\n                    \"locationWhiteList\": [\"Architektur und Bau - 1. ZG\",\"Neuerwerbungen - EG\",\"Handapparate - EG\",\"Compactus, offen - EG\",\"Zeitschriften - EG\",\"Allgemeines und Nachschlagewerke - EG\",\"Angewandte Linguistik - EG\",\"Gesundheit und Medizin - EG\",\"Technik und Naturwissenschaften - 1. ZG\",\"Wissenschaft und Bildung - EG\",\"Wirtschaft und Management - 1. ZG\",\"Architektur und Bau - 1. ZG\",\"Kunst und Unterhaltung - EG\",\"Recht und Politik - 2. ZG\"]\n            },\n            {\n                    \"shortname\": \"PHZH\",\n                    \"name\": \"PH Zürich, Bibliothek\",\n                    \"libraryCode\": \"UPHZH\",\n                    \"baseUrl\": \"https://phzh.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"ULFHF\",\"ULFHG\",\"ULFHN\",\"ULFHS\"],\n                    \"locationWhiteList\": [\"Stockwerk F - frei zugänglich\",\"Stockwerk G - frei zugänglich\", \"Stockwerk H Nord - frei zugänglich\",\"Stockwerk H Süd - frei zugänglich\"]\n            },\n            {\n                    \"shortname\": \"HGK-MED\",\n                    \"name\": \"FHNW HGK-Mediathek Basel\",\n                    \"libraryCode\": \"E75\",\n                    \"baseUrl\":\"https://mediathek.hgk.fhnw.ch/nebis\",\n                    \"locationCodeWhiteList\": [\"HAP\",\"E75BI\",\"E75AC\",\"E75MA\",\"E75VS\"],\n\t\t            \"locationWhiteList\":[\"Handapparat\",\"Mediathek\",\"Archiv\",\"Magazin\",\"Verschiedene Standorte\"]\n            },\n            {\n                    \"shortname\": \"HGK-MED\",\n                    \"name\": \"FHNW Campus Muttenz Bibliothek\",\n                    \"libraryCode\": \"E44\",\n                    \"baseUrl\":\"https://fhnw-cmu.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"E44TE\",\"E44BI\",\"E44MG\",\"E44VS\"],\n                    \"locationWhiteList\":[\"Ausleihe auf Anfrage, bitte Bibliothek kontaktieren\",\"Bibliothek\",\"Magazin: Nicht frei zugänglich, zur Abholung bestellen\",\"Verschiedene Standorte\"]\n            }\n    ];\n\n    // todo: are the statuses correct and complete?\n    const availabilityStatus = ['Exemplar ist vorhanden', 'Item in place', 'Exemplaire en rayon', 'Copia in posizione'];\n\n    function getMapongoLibrary(libraryCode){\n      let filterLibraries = libraries.filter( l => {return l.libraryCode === libraryCode;} );\n      if (filterLibraries.length > 0)\n          return filterLibraries[0];\n      else\n          return null;\n    }\n\n    function isMapongoLibrary(libraryCode){\n      let filterLibraries = libraries.filter( l => {return l.libraryCode === libraryCode} );\n      if (filterLibraries.length > 0)return true;\n      else return false;\n    }\n\n    function isMapongoSubLocation(libraryCode, subLocation){\n      let filterLibraries = libraries.filter( l => {return l.libraryCode === libraryCode && l.locationWhiteList.indexOf(subLocation)>-1;} );\n      if (filterLibraries.length > 0)return true;\n      else return false;\n    }\n\n    function getSubLocationCode(libraryCode, subLocation){\n        let filterLibraries = libraries.filter( l => {return l.libraryCode === libraryCode} );\n        if (filterLibraries.length === 0)return null;\n        let i = filterLibraries[0].locationWhiteList.indexOf(subLocation);\n        return filterLibraries[0].locationCodeWhiteList[i];\n    }\n\n    function getBaseUrl(libraryCode){\n        let lib = getMapongoLibrary(libraryCode);\n        if (lib) {\n            return lib.baseUrl;\n        }\n        else{\n            return \"\";\n        }\n\n    }\n\n    function isAvailable(itemstatusname){\n        let filterStatus = availabilityStatus.filter( s => {return s === itemstatusname});\n        if (filterStatus.length > 0)return true;\n        return false;\n    }\n\n    return {\n        isMapongoLibrary: isMapongoLibrary,\n        isMapongoSubLocation: isMapongoSubLocation,\n        getBaseUrl: getBaseUrl,\n        getSubLocationCode: getSubLocationCode,\n        isAvailable: isAvailable\n    };\n\n\n}];\n","export const ethMapongoConfig = function(){\n    return {\n        label: {\n            qrc: {\n                de: 'Karte auf Smartphone laden',\n                en: 'Load map on your smartphone',\n                fr: 'Charger la carte sur votre smartphone'\n            }\n        }\n    }\n}\n","export class ethMapongoController {\n\n    constructor(ethMapongoLibrariesService, ethConfigService, ethMapongoConfig) {\n        this.ethMapongoLibrariesService = ethMapongoLibrariesService;\n        this.ethConfigService = ethConfigService;\n        this.config = ethMapongoConfig;\n        this.lang = this.ethConfigService.getLanguage();\n    }\n\n    $onInit() {\n        // reference to prmLocationItemsController (all items)\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n    };\n\n    getMapongoImageSrc() {\n        let src = \"\";\n        try{\n            if (!this.parentCtrl.loc || !this.parentCtrl.loc.location) {\n                console.error(\"***ETH*** ethMapongoController.getMapongoImageSrc: loc or loc.location not available\");\n                return;\n            }\n            let loc = this.parentCtrl.loc.location;\n            let baseUrl = this.ethMapongoLibrariesService.getBaseUrl(loc.libraryCode);\n\n            src = baseUrl + \"/static_images/projects/1/search_thumbnail.jpg?project_id=1&search_key=\" + encodeURIComponent(this.callnumber);\n            if (loc.libraryCode === \"E51\" || loc.libraryCode === \"UPHZH\" ) {\n                src += \"&search_context2=\" + encodeURIComponent(this.sublocation);\n            }\n            if (loc.libraryCode === \"E65\") {\n                src += \"&e=\" + encodeURIComponent(this.recordid);\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** EthMapongoController.getMapongoImageSrc:\");\n            console.error(e.message);\n        }\n        return src;\n    }\n\n    getMapongoUrl() {\n        let url = \"\";\n        try{\n            let loc = this.parentCtrl.loc.location;\n            let baseUrl = this.ethMapongoLibrariesService.getBaseUrl(loc.libraryCode);\n\n            url = baseUrl + \"/viewer?project_id=1&search_key=\" + encodeURIComponent(this.callnumber) + \"&language=\" + this.lang + \"&e=\" + encodeURIComponent(this.recordid);\n            // ZHAW-HSB-WIN\n            if (loc.libraryCode === \"E51\" || loc.libraryCode === \"UPHZH\" ) {\n                url += \"&search_context2=\" + encodeURIComponent(this.sublocation);\n            }\n            if (this.barcode != \"\") {\n                    url += \"&bcd=\" + this.barcode;\n            }\n\n        }\n        catch(e){\n            console.error(\"***ETH*** EthMapongoController.getMapongoUrl:\");\n            console.error(e.message);\n        }\n        return url;\n    }\n\n    getMapongoQRC() {\n        let src = \"\";\n        try{\n            let loc = this.parentCtrl.loc.location;\n            let baseUrl = this.ethMapongoLibrariesService.getBaseUrl(loc.libraryCode);\n\n            src = baseUrl + \"/static_images/projects/1/search_qrcode.png?project_id=1&search_key=\" + encodeURIComponent(this.callnumber) + \"&language=\" + this.lang + \"&e=\" + encodeURIComponent(this.recordid);\n            if (loc.libraryCode === \"E51\" || loc.libraryCode === \"UPHZH\" ) {\n                src += \"&search_context2=\" + encodeURIComponent(this.sublocation);\n            }\n            if (this.barcode != \"\") {\n                src += \"&bcd=\" + this.barcode;\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** EthMapongoController.getMapongoQRC:\");\n            console.error(e.message);\n        }\n        return src;\n    }\n\n\n}\n\nethMapongoController.$inject = [ 'ethMapongoLibrariesService', 'ethConfigService', 'ethMapongoConfig'];\n","/**\n * @ngdoc module\n * @name ethMapongoModule\n *\n * @description\n * - renders Link, map and QRCode for mapongo\n *\n *\n * <b>AngularJS Dependencies</b><br>\n * Service {@link ETH.ethMapongoLibrariesService}<br>\n * Service /js/services {@link ETH.ethConfigService}<br>\n * Service {@link ETH.ethMapongoConfig}<br>\n *\n *\n * <b>CSS/Image Dependencies</b><br>\n * CSS /css/mapongo.css\n *\n * @example\n * ZHAW MMS IDs: 991128155109705501, 990013732410205503; 2 Exemplare: 990058665580205503; 5 Exemplare: 991129451879705501\n *\n */\nimport { ethConfigService } from './eth-config.service';\nimport { ethMapongoConfig } from './eth-mapongo.config';\nimport { ethMapongoLibrariesService } from './eth-mapongo-libraries.service';\nimport { ethMapongoController } from './eth-mapongo.controller';\nimport { ethMapongoHtml } from './eth-mapongo.html';\n\nexport const ethMapongoModule = angular\n    .module('ethMapongoModule', [])\n    .factory('ethConfigService', ethConfigService)\n    .factory('ethMapongoConfig', ethMapongoConfig)\n    .factory('ethMapongoLibrariesService', ethMapongoLibrariesService)\n    .controller('ethMapongoController', ethMapongoController)\n    .component('ethMapongo', {\n        bindings: {\n            afterCtrl: '<',\n            recordid: '@',\n            callnumber: '@',\n            barcode: '@',\n            sublocation: '@'\n        },\n        controller: 'ethMapongoController',\n        template: ethMapongoHtml\n    })","\r\n\r\n//--------\"i\" button ---------------------------------------\r\n\r\n\r\n    export class slspIButtonController {\r\n\r\n        constructor() {}\r\n      \r\n        $doCheck() {\r\n            try{\r\n                this.parentCtrl = this.afterCtrl.parentCtrl;\r\n                this.getLibrary = getLibrary;\r\n                this.getLibraryCode = getLibraryCode;\r\n                this.getLanguage = getLanguage;\r\n                this.biblinkText = \"Library\";\r\n                this.biblinkBase = \"https:\\/\\/registration.slsp.ch\\/libraries\\/\\?library\\=\";\r\n\r\n                function getLibrary() {\r\n                    return this.parentCtrl.currLoc.location.librarycodeTranslation;\r\n                    \r\n                }\r\n                function getLibraryCode() {\r\n                    return this.parentCtrl.currLoc.location.libraryCode;\r\n                    \r\n                }\r\n                function getLanguage() {\r\n                    return this.parentCtrl.userSessionManagerService.$location.$$search.lang;\r\n                    \r\n                }\r\n               \r\n            }\r\n            catch(e){\r\n                console.error(\"***SLSP*** an error occured: slspIButtonController\\n\\n\");\r\n                console.error(e.message);\r\n            }\r\n        }\r\n    }\r\n    \r\n    slspIButtonController.$inject = [];\r\n\r\n    ","    import {slspIButtonController} from './slsp-i-button.controller';\r\n    import {slspIButtonHtml} from './slsp-i-button.html';\r\n  \r\n\r\n    export const slspIButtonModule = angular\r\n        .module('slspIButtonModule', [])\r\n            .controller('slspIButtonController', slspIButtonController)\r\n            .component('slspIButtonComponent', {\r\n                bindings: {afterCtrl: '<'},\r\n                controller: 'slspIButtonController',\r\n                template: slspIButtonHtml\r\n            })","import {ethLocationsFilterModule} from './eth-locations-filter/eth-locations-filter.module';\n\nexport const ethLocationsAfterModule = angular\n    .module('ethLocationsAfterModule', [])\n        .component('prmLocationsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<eth-locations-filter-component after-ctrl=\"$ctrl\"></eth-locations-filter-component>`\n        });\n\nethLocationsAfterModule.requires.push(ethLocationsFilterModule.name);\n","export class ethLocationsFilterController {\n\n    constructor($timeout, $scope) {\n        this.$timeout = $timeout;\n        this.$scope = $scope;\n    }\n\n    $onInit() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.$watch('this.$ctrl.parentCtrl.locations[0].location.librarycodeTranslation', (newValue, oldValue, scope) => {\n                if(!scope.$ctrl.parentCtrl.isLocationsFilterVisible && newValue && newValue != ''){\n                    this.$timeout(() => {\n                        scope.$ctrl.parentCtrl.isLocationsFilterVisible = true;\n                    }, 0);\n                }\n            }, true);\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethLocationsFilterController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nethLocationsFilterController.$inject = ['$timeout', '$scope'];\n","/**\n* @ngdoc module\n* @name ethLocationsFilterModule\n*\n* @description\n*\n* Customization for the locations filter:<br>\n* - the locations filter is visible by default\n*\n* If there is 1 location: prmLocationItemsAfter\n*\n* If there are multiple locations: prmLocationAfter;\n* after all locations: prmLocationsAfter;\n* after choosing a location: prmLocationItemsAfter\n*\n*\n* <b>AngularJS Dependencies</b><br>\n*\n*\n* <b>CSS/Image Dependencies</b><br>\n* CSS eth-locations-filter.css\n*\n*\n*/\nimport {ethLocationsFilterController} from './eth-locations-filter.controller';\n\nexport const ethLocationsFilterModule = angular\n    .module('ethLocationsFilterModule', [])\n        .controller('ethLocationsFilterController', ethLocationsFilterController)\n        .component('ethLocationsFilterComponent', {\n            bindings: {afterCtrl: '<'},\n            controller: 'ethLocationsFilterController'\n        })\n","\r\n\r\n//-----------------------------------------------\r\n\r\n\r\nexport class slspEditPersonalDetailsController {\r\n\r\n    constructor($scope, $element) {\r\n        this.$scope = $scope;\r\n        this.$element = $element;\r\n\r\n    }\r\n\r\n    $doCheck() {\r\n        try {\r\n            this.parentCtrl = this.afterCtrl.parentCtrl;\r\n\r\n\r\n\r\n            let lang = 'en';\r\n            let sms = this.$scope.$root.$$childHead.$ctrl.userSessionManagerService;\r\n            if (sms) {\r\n                lang = sms.getInterfaceLanguage();\r\n            }\r\n\r\n            this.detailsBaseEdu = \"https:\\/\\/eduid.ch\\/web\\/change-account-data\\/2\\/?lang=\" + lang;\r\n            this.detailsBaseReg = \"https:\\/\\/registration.slsp.ch\\/library-card\\/?lang=\" + lang;\r\n            this.exclude = ['STAFF', '11', '12', '13', '14', '15', '16', '91', '92', '99'];\r\n            this.grpA = ['11', '91', '92'];\r\n            this.grpB = ['12', '13', '14', '15', '16'];\r\n\r\n\r\n            this.getPatronGrp = function () {\r\n                if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                    let patron = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                    if (!this.exclude.includes(patron)) {\r\n                        return true;\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n\r\n            this.grpLabelA = function () {\r\n                if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                    let labelA = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                    if (this.grpA.includes(labelA)) {\r\n                        return true;\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n\r\n\r\n            this.grpLabelB = function () {\r\n                if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\r\n                    let labelB = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\r\n                    if (this.grpB.includes(labelB)) {\r\n                        return true;\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n\r\n            this.buttonMove = function () {\r\n                let parentElement = angular.element(document.querySelector('prm-personal-info > div.layout-wrap.layout-align-center-start.layout-row > md-card:nth-child(2)'));\r\n                let element = angular.element(document.querySelector('#SLSPeditPersonalDetails'));\r\n                parentElement.append(element);\r\n            }\r\n\r\n\r\n        }\r\n        catch (e) {\r\n            console.error(\"***SLSP*** an error occured: EditPersonalDetailsController\\n\\n\");\r\n            console.error(e.message);\r\n        }\r\n    }\r\n}\r\n\r\nslspEditPersonalDetailsController.$inject = ['$scope'];\r\n\r\n","import {slspEditPersonalDetailsController} from './slsp-edit-personal-details.controller';\nimport {slspEditPersonalDetailsHtml} from './slsp-edit-personal-details.html';\n\n\nexport const slspEditPersonalDetailsModule = angular\n    .module('slspEditPersonalDetailsModule', [])\n        .controller('slspEditPersonalDetailsController', slspEditPersonalDetailsController)\n        .component('slspEditPersonalDetailsComponent', {\n            bindings: {afterCtrl: '<'},\n            controller: 'slspEditPersonalDetailsController',\n            template: slspEditPersonalDetailsHtml\n        })","import {slspEditPersonalDetailsModule} from './slsp-edit-personal-details/slsp-edit-personal-details.module';\n\n\nexport const slspPersonalInfoAfterModule = angular\n    .module('slspPersonalInfoAfterModule', [])\n        .component('prmPersonalInfoAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-edit-personal-details-component after-ctrl=\"$ctrl\" id=\"SLSPeditPersonalDetails\"></slsp-edit-personal-details-component>`\n        });\n\n        slspPersonalInfoAfterModule.requires.push(slspEditPersonalDetailsModule.name);\n\n","export class bcuLangSwitchController {\n\n    constructor($element, $window) {\n        this.$parent = $element.parent().parent()[0];\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n        this.$window = $window;\n    }\n\n    $onInit() {\n        try {\n            \n            this.languages = [\"de\",\"fr\",\"it\",\"en\"];\n            if (!this.languages.includes(this.parentCtrl.lang)) {\n                this.changeLanguage(\"en\");\n            }\n            \n        }\n        catch (e) {\n            console.error(\"***BCUFR*** bcuLangSwitchControler $onInit\");\n            console.error(e.message);\n        }\n    };\n\n    changeLanguage(lang) {\n        \n        this.parentCtrl.changeLangService.addLangParamToUrl(lang);\n        let t = this.parentCtrl;\n        this.parentCtrl.i18nService.setLanguage(lang).then(function(){\n            t.$timeout(function(){return t.$state.go(t.$state.current,{lang:lang},{reload:!0})})\n        });\n };\n\n}\nbcuLangSwitchController.$inject = ['$element'];","/**\n* @ngdoc module\n* @name bcuLangSwitchModule\n*\n* @description\n* - Add LangSwitch to user area\n* @example\n* each view\n*\n*/\nimport {bcuLangSwitchController} from './bcu-lang-switch.controller';\n\nexport const bcuLangSwitchModule = angular\n    .module('bcuLangSwitchModule', [])\n        .controller('bcuLangSwitchController', bcuLangSwitchController)\n        .component('bcuLangSwitchComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'bcuLangSwitchController',\n//            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"(lang, url) in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\"><a href=\"{{url}}\">{{lang}}</a></button>'\n            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"lang in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\" ng-click=\"$ctrl.changeLanguage(lang)\">{{lang}}</button>'\n        })\n","\nexport class slspIllSigninOrderLoggedOutController {\n\n    constructor(slspIllSigninOrderLoggedOutService, $scope) {\n        this.slspIllSigninOrderLoggedOutService = slspIllSigninOrderLoggedOutService;\n        this.$scope = $scope;\n    }\n\n    $doCheck() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.usrNme = this.slspIllSigninOrderLoggedOutService.isGuest();\n\n            if (this.$scope.usrNme == true) {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.addClass('logged-out')\n            }\n        \n            else {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.removeClass('logged-out');\n            }\n        }\n        catch(e){\n            console.error(\"***SLSP*** an error occured: slspIllSigninOrderLoggedOutController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nslspIllSigninOrderLoggedOutController.$inject = ['slspIllSigninOrderLoggedOutService', '$scope'];\n        \n\n","\n\n    //--------ILL Signin Order -  if logged out ---------------------------------------\n   \n\n    import {slspIllSigninOrderLoggedOutController} from './slsp-ill-signin-order-logged-out.controller';\n    import {slspIllSigninOrderLoggedOutService} from './slsp-ill-signin-order-logged-out.service';\n\n    export const slspIllSigninOrderLoggedOutModule = angular\n        .module('slspIllSigninOrderLoggedOutModule', [])\n            .factory('slspIllSigninOrderLoggedOutService', slspIllSigninOrderLoggedOutService)\n            .controller('slspIllSigninOrderLoggedOutController', slspIllSigninOrderLoggedOutController)\n            .component('slspIllSigninOrderLoggedOutComponent',  {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIllSigninOrderLoggedOutController',\n                \n            })\n    ","\n\n    export const slspIllSigninOrderLoggedOutService = ['jwtHelper', function( jwtHelper ){\n\n        function getDecodedToken(){\n            try{\n                if (!sessionStorage){\n                    console.error(\"***SLSP*** no session storage\")\n                    return null;\n                }\n                let jwt = sessionStorage.getItem('primoExploreJwt');\n                if (!jwt){\n                    return null;\n                }\n                return jwtHelper.decodeToken(jwt);\n            }\n            catch(e){\n                console.error(\"**SLSP*** an error occured: userService.getDecodedToken:\");\n                console.error(e.message);\n            }\n        }\n  \n        function isGuest(){\n            try{\n                let decodedToken = getDecodedToken();\n                if (!decodedToken) {\n                    return null;\n                }\n                let userName= decodedToken.userGroup !== 'GUEST'? decodedToken.userName : '';\n                if (userName){\n                    return false;\n                }\n                else{\n                    return true;\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: userService.isGuest:\");\n                console.error(e.message);\n            }\n        }\n    \n        return {\n            isGuest: isGuest,\n            getDecodedToken: getDecodedToken\n        };\n    }]\n    ","import {bcuLangSwitchModule} from './bcu-lang-switch/bcu-lang-switch.module';\nimport {slspIllSigninOrderLoggedOutModule} from './slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.module';\n\nexport const slspUserAreaExpandableAfterModule = angular\n    .module('slspUserAreaExpandableAfterModule', [])\n        .component('prmUserAreaExpandableAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<bcu-lang-switch-component after-ctrl=\"$ctrl\"></bcu-lang-switch-component><slsp-ill-signin-order-logged-out-component after-ctrl=\"$ctrl\"></slsp-ill-signin-order-logged-out-component>`,\n        });\n\nslspUserAreaExpandableAfterModule.requires.push(bcuLangSwitchModule.name);\nslspUserAreaExpandableAfterModule.requires.push(slspIllSigninOrderLoggedOutModule.name);","require('./js/slsp-archives-htgi.module.js')\nmodule.exports = 'slspArchivesHtgi'\n","angular\n    .module('slspArchivesHtgi', [])\n\n    // \"how to get it\" section for resources of archives MFA, TMA (CMI STAR)\n\n    .controller('ArchivesHtgiController', [function () {\n\n        this.$onInit = function () {\n            try{\n                if(!this.parentCtrl.item.pnx.display.source || this.parentCtrl.item.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.item.pnx.display.source[0];\n                // CMI STAR sources\n                if(this.source === 'ETH_MaxFrischArchiv' || this.source === 'ETH_ThomasMannArchiv'){\n                    // hide content of htgi section\n                    let section = document.getElementById('full-view-container');\n                    section.classList.add('slsp-archives-hide');\n\n                    // get guid of CMIStar\n                    let sourceid = this.parentCtrl.item.pnx.control.originalsourceid[0];\n                    let guid = sourceid.substring(sourceid.lastIndexOf(':') + 1);\n\n                    // different sources: concat url\n                    if(this.source === 'ETH_ThomasMannArchiv'){\n                        this.url = 'http://www.online.tma.ethz.ch/home/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Detailed information in Thomas Mann-Archiv Online (metadata only)';\n                    }\n                    else if (this.source === 'ETH_MaxFrischArchiv') {\n                        this.url = 'http://maxfrischarchiv-online.ethz.ch/home/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Request via Max Frisch-Archiv Online';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesHtgiController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n\n    .component('almaHtgiSvcAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesHtgiController',\n        template: `\n        <div class=\"slsp-archives\" ng-if=\"$ctrl.url\">\n            <md-list layout=\"column\" class=\"separate-list-items md-primoExplore-theme layout-column\" role=\"list\">\n                <md-list-item role=\"listitem\" ng-href=\"{{$ctrl.url}}\" target=\"_blank\">\n                      <span>{{('customized.archives.' + $ctrl.source + '.linktext' | translate)}}</span>\n                    <span>{{$ctrl.label}}</span>\n                    <div class=\"md-secondary\">\n                        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\" class=\"layout-margin\"/>\n                    </div>\n                </md-list-item>\n            </md-list>\n            <div ng-if=\"$ctrl.source === 'ETH_ThomasMannArchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_ThomasMannArchiv.text1\">No request possible. The digitized item can be consulted in the Thomas Mann Archives reading room upon advance registration (</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"https://tma.ethz.ch/utils/kontakt.html\">\n                        <span translate=\"customized.archives.ETH_ThomasMannArchiv.linktext2\">Contact</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_ThomasMannArchiv.text2\">).</span>\n                </div>\n            </div>\n            <div ng-if=\"$ctrl.source === 'ETH_MaxFrischArchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_MaxFrischArchiv.text1\">Informationen zu Bestellung und Benutzung siehe</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"http://maxfrischarchiv-online.ethz.ch/home/#/manual\">\n                        <span translate=\"customized.archives.ETH_MaxFrischArchiv.linktext2\">Bedienungshinweise</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_MaxFrischArchiv.text2\">.</span>\n                </div>\n            </div>\n        </div>\n        `\n    });\n","require('./js/slsp-archives-viewit.module.js')\nmodule.exports = 'slspArchivesViewit'\n","angular\n.module('slspArchivesViewit', [])\n\n    .component('prmSearchResultAvailabilityLineAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesAvailabilityLineController'\n    })\n\n    .component('prmAlmaViewitAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesViewitController',\n        template: `\n        <div class=\"slsp-archives\" ng-if=\"$ctrl.url\">\n            <md-list layout=\"column\" class=\"separate-list-items md-primoExplore-theme layout-column\" role=\"list\">\n                <md-list-item role=\"listitem\" ng-href=\"{{$ctrl.url}}\" target=\"_blank\">\n                    <span>{{('customized.archives.' + $ctrl.source + '.linktext' | translate)}}</span>\n                    <span>{{$ctrl.label}}</span>\n                    <div class=\"md-secondary\">\n                        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\" class=\"layout-margin\"/>\n                    </div>\n                </md-list-item>\n            </md-list>\n            <div ng-if=\"$ctrl.source === 'ETH_Hochschularchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_Hochschularchiv.text1\">Informationen zu Bestellung und Benutzung siehe</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"http://archivdatenbank-online.ethz.ch/hsa/#/manual\">\n                        <span translate=\"customized.archives.ETH_Hochschularchiv.linktext2\">Bedienungshinweise</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_Hochschularchiv.text2\">.</span>\n                </div>\n            </div>\n        </div>\n        `\n        })\n\n    // viewit section for archives when there are only partial digitized items, e.g. \"ETH Hochschularchiv\" (CMI STAR)\n    .controller('ArchivesViewitController', ['$translate', function ($translate) {\n        this.$onInit = function () {\n            try{\n                if(!this.parentCtrl.item.pnx.display.source || this.parentCtrl.item.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.item.pnx.display.source[0];\n                // CMI STAR sources\n                if(this.source === 'ETH_Hochschularchiv'){\n                    if(this.parentCtrl.item.delivery.GetIt1 && this.parentCtrl.item.delivery.GetIt1.length > 0 && this.parentCtrl.item.delivery.GetIt1[0].links && this.parentCtrl.item.delivery.GetIt1[0].links.length > 0){\n\n                        // there is an online resource: return and do nothing\n                        let aOnlineLink = this.parentCtrl.item.delivery.GetIt1[0].links.filter( l => {\n                            if(l.isLinktoOnline && l.link !== ''){\n                                return true;\n                            }\n                            return false;\n                        });\n                        if (aOnlineLink.length > 0) {\n                            return;\n                        }\n\n                        // there is no online resource\n                        // change section heading\n                        $translate('nui.getit.service_howtogetit').then((translation) => {\n                            let fullView = document.getElementById('fullView');\n                            angular.element(fullView.querySelector(\"h4[translate='nui.getit.service_viewit']\")).text(translation);\n                            angular.element(fullView.querySelector(\"#services-index span[translate='nui.getit.service_viewit']\")).text(translation);\n                        });\n\n                    }\n                    // hide content of viewit section\n                    let section = document.getElementById('full-view-container');\n                    section.classList.add('slsp-archives-hide');\n\n                    // get guid of CMIStar\n                    let sourceid = this.parentCtrl.item.pnx.control.originalsourceid[0];\n                    let guid = sourceid.substring(sourceid.lastIndexOf(':') + 1);\n\n                    // different sources: concat url\n                    if(this.source === 'ETH_Hochschularchiv'){\n                        this.url = 'http://archivdatenbank-online.ethz.ch/hsa/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Bestellen über Hochschularchiv Online';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesViewitController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n\n    // change availability line, if there is no digitization\n    .controller('ArchivesAvailabilityLineController', ['$translate', function ($translate) {\n        this.$onInit = function () {\n            try{\n                this.changeButton = false;\n                if(!this.parentCtrl.result.pnx.display.source || this.parentCtrl.result.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.result.pnx.display.source[0];\n                if(!this.source === 'ETH_Hochschularchiv')return;\n                if(!this.parentCtrl.result.delivery.GetIt1 || this.parentCtrl.result.delivery.GetIt1.length == 0 || !this.parentCtrl.result.delivery.GetIt1[0].links || this.parentCtrl.result.delivery.GetIt1[0].links.length == 0)return;\n\n                let aOnlineLink = this.parentCtrl.result.delivery.GetIt1[0].links.filter( l => {\n                    if(l.isLinktoOnline && l.link !== ''){\n                        return true;\n                    }\n                    return false;\n                });\n                if (aOnlineLink.length === 0) {\n                    // there is no online resource\n                    $translate('delivery.code.no_inventory').then((translation) => {\n                        this.changeButton = true;\n                        this.changeButtonText = translation;\n                    });\n                    let availabilityLine = this.parentCtrl.$element[0];\n                    if(availabilityLine) {\n                        availabilityLine.classList.add('slsp-hsa-no-online');\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesAvailabilityLineController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n\n        this.$doCheck = function () {\n            try{\n                if (this.changeButton){\n                    let availabilityLine = this.parentCtrl.$element[0];\n                    let button = availabilityLine.querySelector('.availability-status');\n                    if(angular.element(button) && angular.element(button).length > 0){\n                        angular.element(button).html(this.changeButtonText);\n                        this.changeButton = false;\n                        this.changeButtonText = '';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***ETH*** an error occured: ArchivesAvailabilityLineController $doCheck\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n","require('./js/slsp-courier-info.module.js')\nmodule.exports = 'slspCourierInfo'","angular\n    .module('slspCourierInfo', [])\n\n    //--------Fees messages ---------------------------------------\n\n    .controller('CourierInfoController', ['$element', function ($element) {\n\n        //shortcut for convenience\n\n        this.form = $element[0].parentElement;\n\n        //function for inserting block\n\n        this.$doCheck = function () {\n            let form = false;\n            let formLength = 2;\n            if (this.form.children[0].children[1] !== undefined && this.form.children[0].children[1].children[0] !== undefined) {\n                form = this.form.children[0].children[1].children[0];\n            }\n            else if (this.form.children[0].children[0] !== undefined && this.form.children[0].children[0].children[0] !== undefined) {\n                form = this.form.children[0].children[0].children[0];\n                formLength = 3;\n            }\n\n            //create and insert info block if not present\n\n            if (form && form.children.length == formLength) {\n                let info = document.createElement('DIV');\n                info.className = \"courier-info bar alert-bar\";\n                info.innerHTML =\n                `<h4>${this.parentCtrl.$translate.instant('customize.fullview.feesTitle')}</h4>\n\t\t<p>${this.parentCtrl.$translate.instant('customize.fullview.feesInfo')}</p>\n\t\t<p><a href=\"${this.parentCtrl.$translate.instant('customize.fullview.feesUrl')}\"\n\t\ttarget=\"_blank\">${this.parentCtrl.$translate.instant('customize.fullview.feesLinkText')}</a></p>`;\n                form.insertBefore(info, form.children[formLength -1]);\n            }\n        }\n\n    }])\n\n    .component('prmRequestAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'CourierInfoController'\n    });\n","require('./js/slsp-http-intercept-requests.module.js')\nmodule.exports = 'slspHttpInterceptRequests'","export const slspHttpInterceptRequests = angular.module('slspHttpInterceptRequests', ['ng'])\n    .config(['$httpProvider', ($httpProvider) => {\n        $httpProvider.interceptors.push(['$q', ($q) => {\n            return {\n                'request': (request) => {\n                    return request\n                },\n                'requestError': (request) => {\n                    return $q.reject(request)\n                },\n                'responseError': (response) => {\n                    return $q.reject(response)\n                },\n                'response': (response) => {\n                    try {\n                        if (/primaws\\/rest\\/priv\\/myaccount\\/requests/.test(response.config.url)) {\n                            if (response.status == 200 && response.data.status == \"ok\") {\n                                let interfaceLanguage = angular.element(document.querySelector('primo-explore')).injector().get('$rootScope').$$childHead.$ctrl.userSessionManagerService.getUserLanguage() ||\n                                    window.appConfig['primo-view']['attributes-map'].interfaceLanguage\n\n                                let list_of_hold_states = {\n                                    'en': [\"in transit\", \"in process\", \"on hold shelf\"],\n                                    'de': [\"transfer\", \"in bearbeitung\", \"bereitgestellt\"],\n                                    'fr': [\"en cours de transfert\", \"en cours\", \"sur le rayon des réservations\"],\n                                    'it': [\"in transito\", \"in processo\", \"scaffale prenotazioni\"]\n                                }\n                                let list_of_photocopy_states = {\n                                    'en': [\"in transit\", \"in process\"],\n                                    'de': [\"transfer\", \"in bearbeitung\"],\n                                    'fr': [\"en cours de transfert\", \"en cours\"],\n                                    'it': [\"in transito\", \"in processo\"]\n                                }\n                                if (Object.keys(list_of_hold_states).includes(interfaceLanguage)) {\n                                    let list_of_hold_states_regexp = RegExp(list_of_hold_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                    // rewrite cancellable holds\n                                    response.data.data.holds.hold.map((m) => {\n                                        if (list_of_hold_states_regexp.test(m.holdstatus.toLowerCase())) {\n                                            m.cancel = 'N'\n                                        }\n                                    })\n                                }\n                                else {\n                                    throw `No mapping found for holds: ${interfaceLanguage}`\n                                }\n\n                                if (Object.keys(list_of_photocopy_states).includes(interfaceLanguage)) {\n                                    let list_of_photocopy_states_regexp = RegExp(list_of_photocopy_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                    // rewrite cancellable photocopies\n                                    response.data.data.photocopies.photocopy.map((m) => {\n                                        if (list_of_photocopy_states_regexp.test(m.requeststatus.toLowerCase())) {\n                                            m.cancel = 'N'\n                                        }\n                                    })\n                                }\n                                else {\n                                    throw `No mapping found for photocopies: ${interfaceLanguage}`\n                                }\n                            }\n                        }\n                    }\n                    catch (error) {\n                        console.error(error);\n                    }\n                    return response;\n                }\n            }\n        }])\n    }])\n","require('./js/slsp-ill-signin-order-alert.module.js')\nmodule.exports = 'slspIllSigninOrderAlert'","//--------ILL Signin Order -  if Alert Message ---------------------------------------\n\nangular\n    .module('slspIllSigninOrderAlert', [])\n\n    .controller('AlertMsgController', ['$scope', function ($scope) {\n        var vm = this;\n        vm.getAlert = getAlert\n\n        function getAlert() {\n            var ga = vm.parentCtrl.almaHowToGetitService.reqAlert._htmlMsg;\n            var myEl2 = angular.element(document.querySelector('primo-explore'));\n\n            if (ga.length > 0) {\n                return myEl2.addClass('alert');\n\n            }\n            else {\n\n                return myEl2.removeClass('alert');\n\n            }\n        }\n\n    }])\n\n    .component('almaHowovpAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'AlertMsgController',\n        template: '<div style=\"display:none\">{{$ctrl.getAlert()}}</div>'\n    });\n"]}